(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.WebDNN=t():e.WebDNN=t()})('undefined'==typeof self?this:self,function(){var e=String.fromCharCode;return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=2)}([function(e,t){'use strict';function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if('object'!=typeof r)throw new TypeError(r+'must be non-object');for(var n in r)a(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,a,r,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(a,a+r),n);for(var o=0;o<r;o++)e[n+o]=t[a+o]},flattenChunks:function(e){var t,a,r,n,o,i;for(r=0,t=0,a=e.length;t<a;t++)r+=e[t].length;for(i=new Uint8Array(r),n=0,(t=0,a=e.length);t<a;t++)o=e[t],i.set(o,n),n+=o.length;return i}},o={arraySet:function(e,t,a,r,n){for(var o=0;o<r;o++)e[n+o]=t[a+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,a){'use strict';function r(e){return d(e)}function n(){if(!window.hasOwnProperty('ProgressEvent')||!window.hasOwnProperty('FormData'))return!1;var e=new XMLHttpRequest;if('string'==typeof e.responseType)try{return e.responseType='blob','blob'===e.responseType}catch(t){return!1}else return!1}function o(e,t){return new Promise(function(a,r){var n=new XMLHttpRequest;n.open('GET',e,!0),n.responseType='blob';var o=new s.default;n.onload=function(){o.forceDispatch();var e=new Response(n.response);a(e)},n.onprogress=function(e){t&&o.request(function(){return t(e.loaded,e.total)})},n.onerror=function(e){r(e)},n.send(null)})}var i=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var s=a(34),d=function(e){return e};t.transformUrl=r,t.registerTransformUrlDelegate=function(e){d=e},t.default=function(e,t){return i(this,void 0,void 0,function(){var a;return l(this,function(i){switch(i.label){case 0:return e='string'==typeof e?r(e)+(t&&t.ignoreCache?'?t='+Date.now():''):Object.assign({},e,{url:r(e.url)+(t&&t.ignoreCache?'?t='+Date.now():'')}),'string'==typeof e&&n()?[4,o(e,t&&t.progressCallback)]:[3,2];case 1:return a=i.sent(),[3,4];case 2:return[4,fetch(e,t)];case 3:a=i.sent(),i.label=4;case 4:if(!a.ok)throw new Error('Fetch returns status code '+a.status+': '+a.statusText);return[2,a];}})})},t.readArrayBufferProgressively=function(e,t){function a(e){return o.set(e.value,i),i+=e.value.length,t&&d.request(function(){return t(i,n)}),i==n?(d.forceDispatch(),o.buffer):l.read().then(a)}if(!t||!e.body)return e.arrayBuffer();var r=e.headers.get('Content-Length');if(!r)return e.arrayBuffer();var n=parseInt(r),o=new Uint8Array(n),i=0,l=e.body.getReader(),d=new s.default;return l.read().then(a)}},function(e,t,a){'use strict';function r(){var e={webgpu:_.webgpu.checkAvailability(),webgl:_.webgl.checkAvailability(),webassembly:_.webassembly.checkAvailability(),fallback:_.fallback.checkAvailability()},t=['webgpu','webgl','webassembly','fallback'].filter(function(t){return e[t]});return{status:e,defaultOrder:t}}function n(e,t){return o(this,void 0,void 0,function(){var a,r;return i(this,function(n){switch(n.label){case 0:if(!(e in _))throw new Error('Unknown backend: "'+e+'"');n.label=1;case 1:return n.trys.push([1,3,,4]),a=new _[e](t),[4,a.init()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),console.warn('Failed to initialize '+e+' backend: '+r),[2,null];case 4:return[2,a];}})})}var o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var l=a(21),s=a(36),d=a(37),u=a(39),p=a(1),c=a(40);t.Image=c;var h=a(43);t.Math=h;var f={};t.getConfiguration=function(e,t){return e in f?f[e]:t},t.setConfiguration=function(e,t){f[e]=t};var _={webgpu:u.default,webgl:d.default,webassembly:s.default,fallback:l.default};t.getBackendAvailability=r,t.load=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){var a,o,l,s,d,u,c,h,f,_,g,b,m,y,v,w,x,E,k,C;return i(this,function(i){switch(i.label){case 0:a=t.backendOrder,o=void 0===a?null:a,l=t.backendOptions,s=void 0===l?{}:l,d=t.cacheStrategy,u=void 0===d?'latest':d,c=t.saveCache,h=void 0===c||c,f=t.progressCallback,_=t.weightDirectory,g=t.transformUrlDelegate,o||(o=r().defaultOrder),'string'==typeof o&&(o=[o]),o=o.slice(),-1===o.indexOf('fallback')&&o.concat(['fallback']),p.registerTransformUrlDelegate(function(t){return _&&/\.bin/.test(t)&&(t=t.replace(e,_)),g&&(t=g(t)),t}),i.label=1;case 1:return 0<o.length?(b=o.shift(),[4,n(b,s[b])]):[3,36];case 2:if(m=i.sent(),!m)return[3,1];i.label=3;case 3:return i.trys.push([3,34,,35]),y=void 0,v=void 0,w=void 0,x=void 0,E=u,'latest'===E?[3,4]:'networkOnly'===E?[3,13]:'networkFirst'===E?[3,13]:'cacheOnly'===E?[3,20]:'cacheFirst'===E?[3,20]:[3,27];case 4:return[4,m.fetchDescriptor(e).catch(function(){return null})];case 5:return w=i.sent(),[4,m.restoreCachedDescriptor(e)];case 6:return(x=i.sent(),!(x&&w&&x.converted_at===w.converted_at))?[3,8]:(y=x,[4,m.restoreCachedParameters(e,f)]);case 7:if(v=i.sent(),v)return[3,28];i.label=8;case 8:return w?(y=w,[4,m.fetchParameters(e,f)]):[3,10];case 9:if(v=i.sent(),v)return[3,28];i.label=10;case 10:return x?(y=x,[4,m.restoreCachedParameters(e,f)]):[3,12];case 11:if(v=i.sent(),v)return[3,28];i.label=12;case 12:throw Error('Network error is occurred and no cache is exist.');case 13:return[4,m.fetchDescriptor(e).catch(function(){return null})];case 14:return(w=i.sent(),!w)?[3,16]:(y=w,[4,m.fetchParameters(e,f)]);case 15:if(v=i.sent(),v)return[3,28];i.label=16;case 16:if('networkOnly'===u)throw Error('Network error is occurred in "networkOnly" cache strategy');return[4,m.restoreCachedDescriptor(e)];case 17:return(x=i.sent(),!x)?[3,19]:(y=x,[4,m.restoreCachedParameters(e,f)]);case 18:if(v=i.sent(),v)return[3,28];i.label=19;case 19:throw Error('Network error is occurred and no cache is exist.');case 20:return[4,m.restoreCachedDescriptor(e)];case 21:return(x=i.sent(),!x)?[3,23]:(y=x,[4,m.restoreCachedParameters(e,f)]);case 22:if(v=i.sent(),v)return[3,28];i.label=23;case 23:if('cacheOnly'===u)throw Error('No cache is exist in "cacheOnly" cache strategy');return[4,m.fetchDescriptor(e).catch(function(){return null})];case 24:return(w=i.sent(),!w)?[3,26]:(y=w,[4,m.fetchParameters(e,f)]);case 25:if(v=i.sent(),v)return[3,28];i.label=26;case 26:throw Error('Network error is occurred and no cache is exist.');case 27:throw Error('"'+u+'" is not valid cache strategy name: "latest", "networkFirst", "networkOnly", "cacheFirst", "cacheOnly" is available.');case 28:if(!h)return[3,32];i.label=29;case 29:return i.trys.push([29,31,,32]),[4,m.saveCache(e,y,v)];case 30:return i.sent(),[3,32];case 31:return k=i.sent(),[3,32];case 32:return[4,m.setDescriptorAndParameters(y,v)];case 33:return i.sent(),[3,35];case 34:return C=i.sent(),console.warn('Model loading failed for '+b+' backend. Trying next backend: '+C.message),[3,1];case 35:return[2,m];case 36:throw new Error('No backend is available');}})})}},function(e,t,a){(function(t){var a,a;/*!
    localForage -- Offline Storage, Improved
    Version 1.5.6
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t){e.exports=t()})(function(){return function d(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){if(!o&&'function'==typeof a&&a)return a(i,!0);if(n)return n(i,!0);var s=new Error('Cannot find module \''+i+'\'');throw s.code='MODULE_NOT_FOUND',s}var c=e[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return r(e?e:t)},c,c.exports,d,p,e,t)}return e[i].exports}for(var n='function'==typeof a&&a,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,a){(function(e){'use strict';function t(){u=!0;for(var e=d.length,t,a;e;){for(a=d,d=[],t=-1;++t<e;)a[t]();e=d.length}u=!1}var r=e.MutationObserver||e.WebKitMutationObserver,n;if(r){var o=0,i=new r(t),l=e.document.createTextNode('');i.observe(l,{characterData:!0}),n=function(){l.data=o=++o%2}}else if(!e.setImmediate&&'undefined'!=typeof e.MessageChannel){var s=new e.MessageChannel;s.port1.onmessage=t,n=function(){s.port2.postMessage(0)}}else n='document'in e&&'onreadystatechange'in e.document.createElement('script')?function(){var a=e.document.createElement('script');a.onreadystatechange=function(){t(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},e.document.documentElement.appendChild(a)}:function(){setTimeout(t,0)};var d=[],u;a.exports=function(e){1!==d.push(e)||u||n()}}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{}],2:[function(e,t){'use strict';function a(){}function r(e){if('function'!=typeof e)throw new TypeError('resolver must be a function');this.state=h,this.queue=[],this.outcome=void 0,e!==a&&s(this,e)}function n(e,t,a){this.promise=e,'function'==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),'function'==typeof a&&(this.onRejected=a,this.callRejected=this.otherCallRejected)}function o(t,e,a){i(function(){var r;try{r=e(a)}catch(a){return u.reject(t,a)}r===t?u.reject(t,new TypeError('Cannot resolve promise with itself')):u.resolve(t,r)})}function l(e){var t=e&&e.then;if(e&&('object'==typeof e||'function'==typeof e)&&'function'==typeof t)return function(){t.apply(e,arguments)}}function s(e,t){function a(t){n||(n=!0,u.reject(e,t))}function r(t){n||(n=!0,u.resolve(e,t))}var n=!1,o=d(function(){t(r,a)});'error'===o.status&&a(o.value)}function d(e,t){var a={};try{a.value=e(t),a.status='success'}catch(t){a.status='error',a.value=t}return a}var i=e(1),u={},p=['REJECTED'],c=['FULFILLED'],h=['PENDING'];t.exports=r,r.prototype['catch']=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if('function'!=typeof e&&this.state===c||'function'!=typeof t&&this.state===p)return this;var r=new this.constructor(a);if(this.state!==h){var i=this.state===c?e:t;o(r,i,this.outcome)}else this.queue.push(new n(r,e,t));return r},n.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){o(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){u.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){o(this.promise,this.onRejected,e)},u.resolve=function(e,t){var a=d(l,t);if('error'===a.status)return u.reject(e,a.value);var r=a.value;if(r)s(e,r);else{e.state=c,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callFulfilled(t)}return e},u.reject=function(e,t){e.state=p,e.outcome=t;for(var a=-1,r=e.queue.length;++a<r;)e.queue[a].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:u.resolve(new this(a),e)},r.reject=function(e){var t=new this(a);return u.reject(t,e)},r.all=function(e){function t(e,t){r.resolve(e).then(function(e){l[t]=e,++s!==n||o||(o=!0,u.resolve(p,l))},function(e){o||(o=!0,u.reject(p,e))})}var r=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var l=Array(n),s=0,d=-1,p=new this(a);++d<n;)t(e[d],d);return p},r.race=function(e){function t(e){r.resolve(e).then(function(e){o||(o=!0,u.resolve(i,e))},function(e){o||(o=!0,u.reject(i,e))})}var r=this;if('[object Array]'!==Object.prototype.toString.call(e))return this.reject(new TypeError('must be an array'));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var l=-1,i=new this(a);++l<n;)t(e[l]);return i}},{1:1}],3:[function(e){(function(t){'use strict';'function'!=typeof t.Promise&&(t.Promise=e(2))}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{2:2}],4:[function(e,t){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if('TypeError'!==o.name)throw o;for(var a='undefined'==typeof BlobBuilder?'undefined'==typeof MSBlobBuilder?'undefined'==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,r=new a,n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function n(e,t,a){'function'==typeof t&&e.then(t),'function'==typeof a&&e['catch'](a)}function i(e){return'string'!=typeof e&&(console.warn(e+' used as a key, but it is not a string.'),e+=''),e}function l(e){for(var t=e.length,a=new ArrayBuffer(t),r=new Uint8Array(a),n=0;n<t;n++)r[n]=e.charCodeAt(n);return a}function s(e){return new P(function(t){var a=e.transaction(A,N),n=r(['']);a.objectStore(A).put(n,'key'),a.onabort=function(a){a.preventDefault(),a.stopPropagation(),t(!1)},a.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),a=navigator.userAgent.match(/Edge\//);t(a||!e||43<=parseInt(e[1],10))}})['catch'](function(){return!1})}function d(e){return'boolean'==typeof he?P.resolve(he):s(e).then(function(e){return he=e,he})}function u(e){var t=fe[e.name],a={};a.promise=new P(function(e){a.resolve=e}),t.deferredOperations.push(a),t.dbReady=t.dbReady?t.dbReady.then(function(){return a.promise}):a.promise}function p(e){var t=fe[e.name],a=t.deferredOperations.pop();a&&a.resolve()}function c(e,t){var a=fe[e.name],r=a.deferredOperations.pop();r&&r.reject(t)}function h(t,e){return new P(function(a,r){if(t.db)if(e)u(t),t.db.close();else return a(t.db);var n=[t.name];e&&n.push(t.version);var o=D.open.apply(D,n);e&&(o.onupgradeneeded=function(a){var e=o.result;try{e.createObjectStore(t.storeName),1>=a.oldVersion&&e.createObjectStore(A)}catch(e){if('ConstraintError'===e.name)console.warn('The database "'+t.name+'" has been upgraded from version '+a.oldVersion+' to version '+a.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw e}}),o.onerror=function(t){t.preventDefault(),r(o.error)},o.onsuccess=function(){a(o.result),p(t)}})}function f(e){return h(e,!1)}function _(e){return h(e,!0)}function g(e,t){if(!e.db)return!0;var a=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,n=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+'" can\'t be downgraded from version '+e.db.version+' to version '+e.version+'.'),e.version=e.db.version),n||a){if(a){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function b(t){return new P(function(a,e){var r=new FileReader;r.onerror=e,r.onloadend=function(r){var e=btoa(r.target.result||'');a({__local_forage_encoded_blob:!0,data:e,type:t.type})},r.readAsBinaryString(t)})}function m(e){var t=l(atob(e.data));return r([t],{type:e.type})}function y(e){return e&&e.__local_forage_encoded_blob}function v(e){var t=this,a=t._initReady().then(function(){var e=fe[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return n(a,e,e),a}function w(e){u(e);for(var t=fe[e.name],a=t.forages,r=0;r<a.length;r++)a[r]._dbInfo.db&&(a[r]._dbInfo.db.close(),a[r]._dbInfo.db=null);return h(e,!1).then(function(e){for(var t=0;t<a.length;t++)a[t]._dbInfo.db=e})['catch'](function(t){throw c(e,t),t})}function x(e,t,a){try{var r=e.db.transaction(e.storeName,t);a(null,r)}catch(r){if(!e.db||'InvalidStateError'===r.name)return w(e).then(function(){var r=e.db.transaction(e.storeName,t);a(null,r)});a(r)}}function E(e){var t=0.75*e.length,a=e.length,r=0,n,o,i,l,s;'='===e[e.length-1]&&(t--,'='===e[e.length-2]&&t--);var d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<a;n+=4)o=F.indexOf(e[n]),i=F.indexOf(e[n+1]),l=F.indexOf(e[n+2]),s=F.indexOf(e[n+3]),u[r++]=o<<2|i>>4,u[r++]=(15&i)<<4|l>>2,u[r++]=(3&l)<<6|63&s;return d}function k(e){var t=new Uint8Array(e),a='',r;for(r=0;r<t.length;r+=3)a+=F[t[r]>>2],a+=F[(3&t[r])<<4|t[r+1]>>4],a+=F[(15&t[r+1])<<2|t[r+2]>>6],a+=F[63&t[r+2]];return 2==t.length%3?a=a.substring(0,a.length-1)+'=':1==t.length%3&&(a=a.substring(0,a.length-2)+'=='),a}function C(e,t,a,r){var n=this;e=i(e);var l=new P(function(o,i){n.ready().then(function(){void 0===t&&(t=null);var l=t,s=n._dbInfo;s.serializer.serialize(t,function(d,t){t?i(t):s.db.transaction(function(a){a.executeSql('INSERT OR REPLACE INTO '+s.storeName+' (key, value) VALUES (?, ?)',[e,d],function(){o(l)},function(e,t){i(t)})},function(t){if(t.code===t.QUOTA_ERR){if(0<r)return void o(C.apply(n,[e,l,a,r-1]));i(t)}})})})['catch'](i)});return o(l,a),l}function T(){var e='_localforage_support_test';try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function I(){return!T()||0<localStorage.length}function S(e,t){e[t]=function(){var a=arguments;return e.ready().then(function(){return e[t].apply(e,a)})}}function R(){for(var e=1,t;e<arguments.length;e++)if(t=arguments[e],t)for(var a in t)t.hasOwnProperty(a)&&(arguments[0][a]=ne(t[a])?t[a].slice():t[a]);return arguments[0]}var B='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},D=function(){try{if('undefined'!=typeof indexedDB)return indexedDB;if('undefined'!=typeof webkitIndexedDB)return webkitIndexedDB;if('undefined'!=typeof mozIndexedDB)return mozIndexedDB;if('undefined'!=typeof OIndexedDB)return OIndexedDB;if('undefined'!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();'undefined'==typeof Promise&&e(3);var P=Promise,A='local-forage-detect-blob-support',z=Object.prototype.toString,O='readonly',N='readwrite',L={_driver:'asyncStorage',_initStorage:function(e){function t(){return P.resolve()}var a=this,r={db:null};if(e)for(var n in e)r[n]=e[n];fe||(fe={});var o=fe[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},fe[r.name]=o),o.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=v);for(var i=[],l=0,s;l<o.forages.length;l++)s=o.forages[l],s!==a&&i.push(s._initReady()['catch'](t));var d=o.forages.slice(0);return P.all(i).then(function(){return r.db=o.db,f(r)}).then(function(e){return r.db=e,g(r,a._defaultConfig.version)?_(r):e}).then(function(e){r.db=o.db=e,a._dbInfo=r;for(var t=0,n;t<d.length;t++)n=d[t],n!==a&&(n._dbInfo.db=r.db,n._dbInfo.version=r.version)})},_support:function(){try{if(!D)return!1;var e='undefined'!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t='function'==typeof fetch&&-1!==fetch.toString().indexOf('[native code');return(!e||t)&&'undefined'!=typeof indexedDB&&'undefined'!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(e,t){var a=this,r=new P(function(t,r){a.ready().then(function(){x(a._dbInfo,O,function(n,o){if(n)return r(n);try{var i=o.objectStore(a._dbInfo.storeName),l=i.openCursor(),s=1;l.onsuccess=function(){var a=l.result;if(a){var r=a.value;y(r)&&(r=m(r));var n=e(r,a.key,s++);void 0===n?a['continue']():t(n)}else t()},l.onerror=function(){r(l.error)}}catch(t){r(t)}})})['catch'](r)});return o(r,t),r},getItem:function(e,t){var a=this;e=i(e);var r=new P(function(t,r){a.ready().then(function(){x(a._dbInfo,O,function(n,o){if(n)return r(n);try{var i=o.objectStore(a._dbInfo.storeName),l=i.get(e);l.onsuccess=function(){var e=l.result;void 0===e&&(e=null),y(e)&&(e=m(e)),t(e)},l.onerror=function(){r(l.error)}}catch(t){r(t)}})})['catch'](r)});return o(r,t),r},setItem:function(e,t,a){var r=this;e=i(e);var n=new P(function(a,n){var o;r.ready().then(function(){return o=r._dbInfo,'[object Blob]'===z.call(t)?d(o.db).then(function(e){return e?t:b(t)}):t}).then(function(t){x(r._dbInfo,N,function(o,i){if(o)return n(o);try{var l=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=l.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),a(t)},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(t){n(t)}})})['catch'](n)});return o(n,a),n},removeItem:function(e,t){var a=this;e=i(e);var r=new P(function(t,r){a.ready().then(function(){x(a._dbInfo,N,function(n,o){if(n)return r(n);try{var i=o.objectStore(a._dbInfo.storeName),l=i['delete'](e);o.oncomplete=function(){t()},o.onerror=function(){r(l.error)},o.onabort=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(t){r(t)}})})['catch'](r)});return o(r,t),r},clear:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){x(t._dbInfo,N,function(r,n){if(r)return a(r);try{var o=n.objectStore(t._dbInfo.storeName),i=o.clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=i.error?i.error:i.transaction.error;a(e)}}catch(t){a(t)}})})['catch'](a)});return o(a,e),a},length:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){x(t._dbInfo,O,function(r,n){if(r)return a(r);try{var o=n.objectStore(t._dbInfo.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){a(i.error)}}catch(t){a(t)}})})['catch'](a)});return o(a,e),a},key:function(e,t){var a=this,r=new P(function(t,r){return 0>e?void t(null):void a.ready().then(function(){x(a._dbInfo,O,function(n,o){if(n)return r(n);try{var i=o.objectStore(a._dbInfo.storeName),l=!1,s=i.openCursor();s.onsuccess=function(){var a=s.result;return a?void(0===e?t(a.key):l?t(a.key):(l=!0,a.advance(e))):void t(null)},s.onerror=function(){r(s.error)}}catch(t){r(t)}})})['catch'](r)});return o(r,t),r},keys:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){x(t._dbInfo,O,function(r,n){if(r)return a(r);try{var o=n.objectStore(t._dbInfo.storeName),i=o.openCursor(),l=[];i.onsuccess=function(){var t=i.result;return t?void(l.push(t.key),t['continue']()):void e(l)},i.onerror=function(){a(i.error)}}catch(t){a(t)}})})['catch'](a)});return o(a,e),a}},F='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',M=/^~~local_forage_type~([^~]+)~/,U='__lfsc__:',W=U.length,j='arbf',G='blob',H='si08',V='ui08',X='uic8',Y='si16',Z='si32',K='ur16',q='ui32',Q='fl32',J='fl64',$=W+j.length,ee=Object.prototype.toString,te={serialize:function(t,a){var e='';if(t&&(e=ee.call(t)),t&&('[object ArrayBuffer]'===e||t.buffer&&'[object ArrayBuffer]'===ee.call(t.buffer))){var r=U,n;t instanceof ArrayBuffer?(n=t,r+=j):(n=t.buffer,'[object Int8Array]'===e?r+=H:'[object Uint8Array]'===e?r+=V:'[object Uint8ClampedArray]'===e?r+=X:'[object Int16Array]'===e?r+=Y:'[object Uint16Array]'===e?r+=K:'[object Int32Array]'===e?r+=Z:'[object Uint32Array]'===e?r+=q:'[object Float32Array]'===e?r+=Q:'[object Float64Array]'===e?r+=J:a(new Error('Failed to get type for BinaryArray'))),a(r+k(n))}else if('[object Blob]'===e){var o=new FileReader;o.onload=function(){var e='~~local_forage_type~'+t.type+'~'+k(this.result);a(U+G+e)},o.readAsArrayBuffer(t)}else try{a(JSON.stringify(t))}catch(r){console.error('Couldn\'t convert value into a JSON string: ',t),a(null,r)}},deserialize:function(e){if(e.substring(0,W)!==U)return JSON.parse(e);var t=e.substring($),a=e.substring(W,$),n;if(a===G&&M.test(t)){var o=t.match(M);n=o[1],t=t.substring(o[0].length)}var i=E(t);switch(a){case j:return i;case G:return r([i],{type:n});case H:return new Int8Array(i);case V:return new Uint8Array(i);case X:return new Uint8ClampedArray(i);case Y:return new Int16Array(i);case K:return new Uint16Array(i);case Z:return new Int32Array(i);case q:return new Uint32Array(i);case Q:return new Float32Array(i);case J:return new Float64Array(i);default:throw new Error('Unkown type: '+a);}},stringToBuffer:E,bufferToString:k},ae={_driver:'webSQLStorage',_initStorage:function(e){var t=this,a={db:null};if(e)for(var r in e)a[r]='string'==typeof e[r]?e[r]:e[r].toString();var n=new P(function(e,r){try{a.db=openDatabase(a.name,a.version+'',a.description,a.size)}catch(t){return r(t)}a.db.transaction(function(n){n.executeSql('CREATE TABLE IF NOT EXISTS '+a.storeName+' (id INTEGER PRIMARY KEY, key unique, value)',[],function(){t._dbInfo=a,e()},function(e,t){r(t)})})});return a.serializer=te,n},_support:function(){return'function'==typeof openDatabase}(),iterate:function(e,t){var a=this,r=new P(function(r,n){a.ready().then(function(){var o=a._dbInfo;o.db.transaction(function(a){a.executeSql('SELECT * FROM '+o.storeName,[],function(a,t){for(var n=t.rows,l=n.length,s=0;s<l;s++){var i=n.item(s),d=i.value;if(d&&(d=o.serializer.deserialize(d)),d=e(d,i.key,s+1),void 0!==d)return void r(d)}r()},function(e,t){n(t)})})})['catch'](n)});return o(r,t),r},getItem:function(e,t){var a=this;e=i(e);var r=new P(function(r,n){a.ready().then(function(){var o=a._dbInfo;o.db.transaction(function(a){a.executeSql('SELECT * FROM '+o.storeName+' WHERE key = ? LIMIT 1',[e],function(e,t){var a=t.rows.length?t.rows.item(0).value:null;a&&(a=o.serializer.deserialize(a)),r(a)},function(e,t){n(t)})})})['catch'](n)});return o(r,t),r},setItem:function(e,t,a){return C.apply(this,[e,t,a,1])},removeItem:function(e,t){var a=this;e=i(e);var r=new P(function(t,r){a.ready().then(function(){var n=a._dbInfo;n.db.transaction(function(a){a.executeSql('DELETE FROM '+n.storeName+' WHERE key = ?',[e],function(){t()},function(e,t){r(t)})})})['catch'](r)});return o(r,t),r},clear:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(n){n.executeSql('DELETE FROM '+r.storeName,[],function(){e()},function(e,t){a(t)})})})['catch'](a)});return o(a,e),a},length:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(n){n.executeSql('SELECT COUNT(key) as c FROM '+r.storeName,[],function(a,t){var r=t.rows.item(0).c;e(r)},function(e,t){a(t)})})})['catch'](a)});return o(a,e),a},key:function(e,t){var a=this,r=new P(function(r,n){a.ready().then(function(){var o=a._dbInfo;o.db.transaction(function(a){a.executeSql('SELECT key FROM '+o.storeName+' WHERE id = ? LIMIT 1',[e+1],function(e,t){var a=t.rows.length?t.rows.item(0).key:null;r(a)},function(e,t){n(t)})})})['catch'](n)});return o(r,t),r},keys:function(e){var t=this,a=new P(function(e,a){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(n){n.executeSql('SELECT key FROM '+r.storeName,[],function(a,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).key);e(r)},function(e,t){a(t)})})})['catch'](a)});return o(a,e),a}},re={_driver:'localStorageWrapper',_initStorage:function(e){var t=this,a={};if(e)for(var r in e)a[r]=e[r];return(a.keyPrefix=a.name+'/',a.storeName!==t._defaultConfig.storeName&&(a.keyPrefix+=a.storeName+'/'),!I())?P.reject():(t._dbInfo=a,a.serializer=te,P.resolve())},_support:function(){try{return'undefined'!=typeof localStorage&&'setItem'in localStorage&&'function'==typeof localStorage.setItem}catch(t){return!1}}(),iterate:function(e,t){var a=this,r=a.ready().then(function(){for(var t=a._dbInfo,r=t.keyPrefix,n=r.length,o=localStorage.length,l=1,s=0,i;s<o;s++)if(i=localStorage.key(s),0===i.indexOf(r)){var d=localStorage.getItem(i);if(d&&(d=t.serializer.deserialize(d)),d=e(d,i.substring(n),l++),void 0!==d)return d}});return o(r,t),r},getItem:function(e,t){var a=this;e=i(e);var r=a.ready().then(function(){var t=a._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return o(r,t),r},setItem:function(e,t,a){var r=this;e=i(e);var n=r.ready().then(function(){void 0===t&&(t=null);var a=t;return new P(function(n,o){var i=r._dbInfo;i.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(i.keyPrefix+e,t),n(a)}catch(t){('QuotaExceededError'===t.name||'NS_ERROR_DOM_QUOTA_REACHED'===t.name)&&o(t),o(t)}})})});return o(n,a),n},removeItem:function(e,t){var a=this;e=i(e);var r=a.ready().then(function(){var t=a._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(r,t),r},clear:function(e){var t=this,a=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,a=localStorage.length-1,r;0<=a;a--)r=localStorage.key(a),0===r.indexOf(e)&&localStorage.removeItem(r)});return o(a,e),a},length:function(e){var t=this,a=t.keys().then(function(e){return e.length});return o(a,e),a},key:function(e,t){var a=this,r=a.ready().then(function(){var t=a._dbInfo,r;try{r=localStorage.key(e)}catch(e){r=null}return r&&(r=r.substring(t.keyPrefix.length)),r});return o(r,t),r},keys:function(e){var t=this,a=t.ready().then(function(){for(var e=t._dbInfo,a=localStorage.length,r=[],n=0,o;n<a;n++)o=localStorage.key(n),0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length));return r});return o(a,e),a}},ne=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},oe={},ie={},le={INDEXEDDB:L,WEBSQL:ae,LOCALSTORAGE:re},se=[le.INDEXEDDB._driver,le.WEBSQL._driver,le.LOCALSTORAGE._driver],de=['clear','getItem','iterate','key','keys','length','removeItem','setItem'],ue={description:'',driver:se.slice(),name:'localforage',size:4980736,storeName:'keyvaluepairs',version:1},pe=function(){function e(t){for(var r in a(this,e),le)if(le.hasOwnProperty(r)){var n=le[r],o=n._driver;this[r]=o,oe[o]||this.defineDriver(n)}this._defaultConfig=R({},ue),this._config=R({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)['catch'](function(){})}return e.prototype.config=function(e){if('object'===('undefined'==typeof e?'undefined':B(e))){if(this._ready)return new Error('Can\'t call config() after localforage has been used.');for(var t in e){if('storeName'==t&&(e[t]=e[t].replace(/\W/g,'_')),'version'==t&&'number'!=typeof e[t])return new Error('Database version must be a number.');this._config[t]=e[t]}return'driver'in e&&e.driver?this.setDriver(this._config.driver):!0}return'string'==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,a){var r=new P(function(t,a){try{var r=e._driver,n=new Error('Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver');if(!e._driver)return void a(n);for(var o=de.concat('_initStorage'),l=0,i=o.length,s;l<i;l++)if(s=o[l],!s||!e[s]||'function'!=typeof e[s])return void a(n);var d=function(a){oe[r]&&console.info('Redefining LocalForage driver: '+r),oe[r]=e,ie[r]=a,t()};'_support'in e?e._support&&'function'==typeof e._support?e._support().then(d,a):d(!!e._support):d(!0)}catch(t){a(t)}});return n(r,t,a),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,a){var r=oe[e]?P.resolve(oe[e]):P.reject(new Error('Driver not found.'));return n(r,t,a),r},e.prototype.getSerializer=function(e){var t=P.resolve(te);return n(t,e),t},e.prototype.ready=function(e){var t=this,a=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return n(a,e,e),a},e.prototype.setDriver=function(e,t,a){function r(){l._config.driver=l.driver()}function o(e){return l._extend(e),r(),l._ready=l._initStorage(l._config),l._ready}function i(e){return function(){function t(){for(;a<e.length;){var n=e[a];return a++,l._dbInfo=null,l._ready=null,l.getDriver(n).then(o)['catch'](t)}r();var i=new Error('No available storage method found.');return l._driverSet=P.reject(i),l._driverSet}var a=0;return t()}}var l=this;ne(e)||(e=[e]);var s=this._getSupportedDrivers(e),d=null===this._driverSet?P.resolve():this._driverSet['catch'](function(){return P.resolve()});return this._driverSet=d.then(function(){var e=s[0];return l._dbInfo=null,l._ready=null,l.getDriver(e).then(function(e){l._driver=e._driver,r(),l._wrapLibraryMethodsWithReady(),l._initDriver=i(s)})})['catch'](function(){r();var e=new Error('No available storage method found.');return l._driverSet=P.reject(e),l._driverSet}),n(this._driverSet,t,a),this._driverSet},e.prototype.supports=function(e){return!!ie[e]},e.prototype._extend=function(e){R(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],a=0,r=e.length,n;a<r;a++)n=e[a],this.supports(n)&&t.push(n);return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=de.length;e<t;e++)S(this,de[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ce=new pe,he,fe;t.exports=ce},{3:3}]},{},[4])(4)})}).call(t,a(22))},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=a(23),n=a(33);t.default=function(e){switch(e){case'raw':return new n.default;case'eightbit':return new r.default;default:throw new Error('Unknown weight encoding');}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e){this.values={},e&&this.update(e)}return Object.defineProperty(e.prototype,'isResolved',{get:function(){return Object.values(this.values).every(function(e){return'number'==typeof e})},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this.values=Object.assign(this.values,e)},e.prototype.resolve=function(e){var t=this;if('object'!=typeof e)return e;if(1==Object.keys(e).length&&'eval'in e){if(!this.isResolved)throw Error('Not all placeholders are resolved: '+this);return eval('(function(placeholders){return '+e.eval+';})')(this.values)}return e instanceof Array?e.map(function(e){return t.resolve(e)}):Object.entries(e).reduce(function(e,a){var r=a[0],n=a[1];return e[r]=t.resolve(n),e},{})},e.prototype.toString=function(){return JSON.stringify(this.values)},e}();t.default=r},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=a(35),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BYTES_PER_ELEMENT=4,t}return r(t,e),t.prototype.toActual=function(){if(!this.buffer)throw new Error('Internal buffer for this variable is not set. DescriptorRunner.setPlaceholderValue() have to be called before calling this function.');return new Float32Array(this.buffer,this.byteOffset,this.length)},t.prototype.every=function(e,t){return this.toActual().every(e,t)},t.prototype.filter=function(e,t){return this.toActual().filter(e,t)},t.prototype.find=function(e,t){return this.toActual().find(e,t)},t.prototype.findIndex=function(e,t){return this.toActual().findIndex(e,t)},t.prototype.forEach=function(e,t){return this.toActual().forEach(e,t)},t.prototype.map=function(e,t){return this.toActual().map(e,t)},t.prototype.reduce=function(e,t){return this.toActual().reduce(e,t)},t.prototype.reduceRight=function(e,t){return this.toActual().reduceRight(e,t)},t.prototype.reverse=function(){return this.toActual().reverse()},t.prototype.slice=function(e,t){return this.toActual().slice(e,t)},t.prototype.some=function(e,t){return this.toActual().some(e,t)},t.prototype.subarray=function(e,t){return this.toActual().subarray(e,t)},t.prototype.includes=function(e,t){return this.toActual().includes(e,t)},t.BYTES_PER_ELEMENT=4,t}(n.SymbolicTypedArray);t.default=o},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(){this.descriptor=null}return e.checkAvailability=function(){return!1},e}();t.DescriptorRunner=a},function(e){'use strict';e.exports={0:'',1:'stream end',2:'need dictionary',"-1":'file error',"-2":'stream error',"-3":'data error',"-4":'insufficient memory',"-5":'buffer error',"-6":'incompatible version'}},function(e){'use strict';e.exports=function(e,t,a,r){for(var o=0|65535&e,i=0|65535&e>>>16,l=0;0!==a;){l=2e3<a?2e3:a,a-=l;do o=0|o+t[r++],i=0|i+o;while(--l);o%=65521,i%=65521}return 0|(o|i<<16)}},function(e){'use strict';var t=function(){for(var e=[],t=0,a;256>t;t++){a=t;for(var r=0;8>r;r++)a=1&a?3988292384^a>>>1:a>>>1;e[t]=a}return e}();e.exports=function(e,a,r,n){e^=-1;for(var o=n;o<n+r;o++)e=e>>>8^t[255&(e^a[o])];return-1^e}},function(t,a,r){'use strict';function n(t,a){if(65537>a&&(t.subarray&&s||!t.subarray&&l))return e.apply(null,o.shrinkBuf(t,a));for(var r='',n=0;n<a;n++)r+=e(t[n]);return r}var o=r(0),l=!0,s=!0;try{e.apply(null,[0])}catch(e){l=!1}try{e.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var d=new o.Buf8(256),i=0;256>i;i++)d[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;d[254]=d[254]=1,a.string2buf=function(e){var t=e.length,a=0,r,n,l,s,d;for(s=0;s<t;s++)n=e.charCodeAt(s),55296==(64512&n)&&s+1<t&&(l=e.charCodeAt(s+1),56320==(64512&l)&&(n=65536+(n-55296<<10)+(l-56320),s++)),a+=128>n?1:2048>n?2:65536>n?3:4;for(r=new o.Buf8(a),d=0,s=0;d<a;s++)n=e.charCodeAt(s),55296==(64512&n)&&s+1<t&&(l=e.charCodeAt(s+1),56320==(64512&l)&&(n=65536+(n-55296<<10)+(l-56320),s++)),128>n?r[d++]=n:2048>n?(r[d++]=192|n>>>6,r[d++]=128|63&n):65536>n?(r[d++]=224|n>>>12,r[d++]=128|63&n>>>6,r[d++]=128|63&n):(r[d++]=240|n>>>18,r[d++]=128|63&n>>>12,r[d++]=128|63&n>>>6,r[d++]=128|63&n);return r},a.buf2binstring=function(e){return n(e,e.length)},a.binstring2buf=function(e){for(var t=new o.Buf8(e.length),a=0,r=t.length;a<r;a++)t[a]=e.charCodeAt(a);return t},a.buf2string=function(e,t){var a=t||e.length,r=Array(2*a),o,i,l,s;for(i=0,o=0;o<a;){if(l=e[o++],128>l){r[i++]=l;continue}if(s=d[l],4<s){r[i++]=65533,o+=s-1;continue}for(l&=2===s?31:3===s?15:7;1<s&&o<a;)l=l<<6|63&e[o++],s--;if(1<s){r[i++]=65533;continue}65536>l?r[i++]=l:(l-=65536,r[i++]=55296|1023&l>>10,r[i++]=56320|1023&l)}return n(r,i)},a.utf8border=function(e,t){var a;for(t=t||e.length,t>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return 0>a?t:0===a?t:a+d[e[a]]>t?a:t}},function(e){'use strict';e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(e){'use strict';e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,a){'use strict';function r(e){return'WebGL2RenderingContext'===e.constructor.name}function n(e){if(null===e)throw Error('Null is detected');return e}var o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var l=a(2);t.isWebGL2=r;var s=function(){function e(){this.gl=n(e.initializeContext())}return e.getInstance=function(){return d||(d=new e),d},e.prototype.createTexture=function(e,t,a,r){var o=this.gl,i=n(o.createTexture());return o.activeTexture(o.TEXTURE0+9),o.bindTexture(o.TEXTURE_2D,i),o.texImage2D(o.TEXTURE_2D,0,a,e,t,0,r,o.FLOAT,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.bindTexture(o.TEXTURE_2D,null),i},e.prototype.createVertexShader=function(e){return this.createShader(this.gl.VERTEX_SHADER,e)},e.prototype.createFragmentShader=function(e){return this.createShader(this.gl.FRAGMENT_SHADER,e)},e.prototype.createShader=function(e,t){var a=n(this.gl.createShader(e));if(this.gl.shaderSource(a,t),this.gl.compileShader(a),!this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS))throw console.error(this.gl.getShaderInfoLog(a)),Error('Shader Compile failed: '+this.gl.getShaderInfoLog(a));return a},e.prototype.createProgram=function(e,t){var a=n(this.gl.createProgram());if(this.gl.attachShader(a,t),this.gl.attachShader(a,e),this.gl.linkProgram(a),!this.gl.getProgramParameter(a,this.gl.LINK_STATUS))throw console.error(this.gl.getProgramInfoLog(a)),Error('ShaderProgram Initialization failed.');return a},e.prototype.createArrayBuffer=function(e){var t=n(this.gl.createBuffer());return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),t},e.prototype.createFrameBuffer=function(){return n(this.gl.createFramebuffer())},e.prototype.bindArrayBuffer=function(e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e)},e.prototype.bindFrameBuffer=function(e,t,a){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.viewport(0,0,t,a),this.gl.scissor(0,0,t,a)},e.prototype.useProgram=function(e){this.gl.useProgram(e)},e.prototype.deleteTexture=function(e){this.gl.deleteTexture(e)},e.initializeWebGL2Context=function(e){void 0===e&&(e=document.createElement('canvas'));var t;return t=e.getContext('webgl2'),t?t.getExtension('EXT_color_buffer_float')?l.getConfiguration('DEBUG',!1)&&!t.getExtension('WEBGL_debug_renderer_info')?null:t:null:null},e.initializeWebGL1Context=function(t){void 0===t&&(t=document.createElement('canvas'));var a=t.getContext('webgl')||t.getContext('experimental-webgl');return a?a.getExtension('OES_texture_float')?e.IS_SAFARI?null:l.getConfiguration('DEBUG',!1)&&!a.getExtension('WEBGL_debug_renderer_info')?null:a:null:null},e.initializeContext=function(){var t=document.createElement('canvas'),a;if(a=e.initializeWebGL2Context(t),a)l.getConfiguration('DEBUG',!1)&&console.info('WebGL2 is enabled');else if(a=e.initializeWebGL1Context(t),a)l.getConfiguration('DEBUG',!1)&&console.info('WebGL2 is disabled');else return null;return a.disable(a.DEPTH_TEST),a.disable(a.STENCIL_TEST),a.disable(a.BLEND),a.disable(a.DITHER),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SAMPLE_COVERAGE),a.enable(a.SCISSOR_TEST),a.enable(a.CULL_FACE),a.cullFace(a.BACK),a},e.checkAvailability=function(){if(null===u){var t=e.initializeContext();u=!!t&&!(4096>l.getConfiguration('MAX_TEXTURE_SIZE',t.getParameter(t.MAX_TEXTURE_SIZE)))}return u},e.prototype.waitForComplete=function(){return o(this,void 0,void 0,function(){var e,t,a;return i(this,function(n){switch(n.label){case 0:if(e=this.gl,!r(e))return[3,4];t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),a=e.clientWaitSync(t,0,0),n.label=1;case 1:return a===e.CONDITION_SATISFIED||a===e.ALREADY_SIGNALED?[3,3]:[4,new Promise(function(e){return setTimeout(e,1)})];case 2:return n.sent(),a=e.clientWaitSync(t,0,0),[3,1];case 3:return e.deleteSync(t),[3,5];case 4:e.finish(),n.label=5;case 5:return[2];}})})},Object.defineProperty(e.prototype,'MAX_TEXTURE_SIZE',{get:function(){var e=l.getConfiguration('MAX_TEXTURE_SIZE',this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE));if(16384<=e)return 4096;if(8192<=e)return 4096;if(4096<=e)return 4096;throw new Error('MAX_TEXTURE_SIZE is too small: '+e)},enumerable:!0,configurable:!0}),e.IS_SAFARI=-1!==navigator.userAgent.toLowerCase().indexOf('safari')&&-1===navigator.userAgent.toLowerCase().indexOf('chrome'),e}(),d;t.default=s;var u=null},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=function(){return function(e,t){this.byteLength=e,this.backend=t}}();t.Buffer=a},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(17),l=a(15),s=function(e){function t(t){var a=e.call(this,t,'webgpu')||this;return 0==t&&(t=4),a.handler=i.default.getInstance(),a.buffer=a.handler.createBuffer(new Uint8Array(t)),a.bufferView=new Uint8Array(a.buffer.contents),a}return r(t,e),t.prototype.write=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,this.handler.sync()];case 1:return r.sent(),a=new e.constructor(this.bufferView.buffer),a.set(e,t),[2];}})})},t.prototype.read=function(e,t,a){return void 0===t&&(t=0),n(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:if(!e)throw new Error('dst cannot be null');return[4,this.handler.sync()];case 1:return(o.sent(),0===this.byteLength)?[2]:(r=e.constructor,n=new r(this.bufferView.buffer,this.bufferView.byteOffset+t*r.BYTES_PER_ELEMENT,a),e.set(n),[2]);}})})},t.prototype.getWriteView=function(e,t,a){return new a(this.bufferView.buffer,this.bufferView.byteOffset+e*a.BYTES_PER_ELEMENT,t)},t.prototype.getReadView=function(e,t,a){return new a(this.bufferView.buffer,this.bufferView.byteOffset+e*a.BYTES_PER_ELEMENT,t)},t.prototype.syncWriteViews=function(){return n(this,void 0,void 0,function(){return o(this,function(){return[2]})})},t.prototype.syncReadViews=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.handler.sync()];case 1:return e.sent(),[2];}})})},t}(l.Buffer);t.default=s},function(e,t,a){'use strict';var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var o=a(16),i=function(){function e(){if(this.pipelineStates=new Map,!t.IS_WEBGPU_SUPPORTED)throw new Error('This browser does not support WebGPU');var e;try{e=document.createElement('canvas').getContext('webgpu')}catch(e){throw new Error('During initializing WebGPURenderingContext, unexpected error is occurred: '+e.message)}if(!e)throw new Error('WebGPURenderingContext initialization failed');this.context=e,this.commandQueue=e.createCommandQueue(),this.loadKernel('kernel void sync(){}','basic')}return e.getInstance=function(){return l||(l=new e),l},e.prototype.createBuffer=function(e){return this.context.createBuffer(e)},e.prototype.loadKernel=function(e,t){void 0===t&&(t='');for(var a=this.context.createLibrary(e),r=0,n=a.functionNames;r<n.length;r++){var o=n[r],i=a.functionWithName(o),l=this.context.createComputePipelineState(i);this.pipelineStates.set(t+'.'+o,l)}},e.prototype.createCommandBuffer=function(){return this.commandQueue.createCommandBuffer()},e.prototype.getPipelineStateByName=function(e){var t=this.pipelineStates.get(e);if(!t)throw TypeError('Kernel function "'+e+'" is not loaded.');return t},e.prototype.executeSinglePipelineState=function(e,t,a,r,n){var l=this.commandBuffer||(this.commandBuffer=this.createCommandBuffer()),s=l.createComputeCommandEncoder();s.setComputePipelineState(this.getPipelineStateByName(e));for(var d=0;d<r.length;d++){var i=r[d],u=void 0;u=i instanceof o.default?i.buffer:i,s.setBuffer(u,0,d)}s.dispatch(t,a),s.endEncoding();var p=null;return n&&(p=l.completed),this.commandBuffer=null,l.commit(),p},e.prototype.sync=function(){return r(this,void 0,void 0,function(){var e,t,a;return n(this,function(){return e=this.createCommandBuffer(),t=e.createComputeCommandEncoder(),t.setComputePipelineState(this.getPipelineStateByName('basic.sync')),t.dispatch({width:1,height:1,depth:1},{width:1,height:1,depth:1}),t.endEncoding(),a=e.completed,e.commit(),[2,a]})})},e}(),l;t.default=i,t.IS_WEBGPU_SUPPORTED='WebGPURenderingContext'in window&&'WebGPUComputeCommandEncoder'in window},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a;(function(e){e[e.CHW=0]='CHW',e[e.HWC=1]='HWC'})(a=t.Order||(t.Order={}));var r;(function(e){e[e.RGB=0]='RGB',e[e.BGR=1]='BGR',e[e.GREY=2]='GREY',e[e.RGBA=3]='RGBA',e[e.BGRA=4]='BGRA'})(r=t.Color||(t.Color={}))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.getContext2D=function(e){var t=e.getContext('2d');if(!t)throw Error('CanvasRenderingContext2D initialization failed');return t}},function(e,t){'use strict';function a(e){return n(this,void 0,void 0,function(){var t;return o(this,function(){return t=document.createElement('img'),[2,new Promise(function(a,r){t.onload=a,t.onerror=r,t.src=e}).then(function(){return t})]})})}function r(e){return n(this,void 0,void 0,function(){var t,r;return o(this,function(){if(t=e.files,!t||0==t.length)throw new Error('No file is selected');return r=URL.createObjectURL(t[0]),[2,a(r)]})})}var n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0}),t.loadImageByUrl=a,t.loadImageFromFileInput=r,t.loadImageByDialog=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(){return e=document.createElement('input'),e.type='file',e.accept='image/*',[2,new Promise(function(t){e.onchange=function(){return t(r(e))},e.click()})]})})}},function(e,t,a){'use strict';function r(e){return void 0===e&&(e=10),new Promise(function(t){return setTimeout(t,e)})}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(3),s=a(4),d=a(1),u=a(5),p=a(6),c=a(7),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backendName='fallback',t}return n(t,e),t.checkAvailability=function(){return!0},t.prototype.init=function(){return o(this,void 0,void 0,function(){return l(this,function(){return[2]})})},t.prototype.setDescriptorAndParameters=function(e,t){return o(this,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return this.setDescriptor(e),[4,this.compile()];case 1:return a.sent(),[4,this.initializeStaticBuffer(t)];case 2:return a.sent(),this.placeholderContext&&this.placeholderContext.isResolved?[4,this.initializeDynamicBuffer()]:[3,4];case 3:a.sent(),a.label=4;case 4:return[2];}})})},t.prototype.fetchDescriptor=function(e){return o(this,void 0,void 0,function(){var t;return l(this,function(a){switch(a.label){case 0:return this.directory=e,[4,d.default(e+'/graph_'+this.backendName+'.json')];case 1:return t=a.sent(),[2,t.json()];}})})},t.prototype.fetchParameters=function(e,t){return o(this,void 0,void 0,function(){var a;return l(this,function(r){switch(r.label){case 0:return[4,d.default(e+'/weight_'+this.backendName+'.bin')];case 1:return a=r.sent(),[2,d.readArrayBufferProgressively(a,t)];}})})},t.prototype.restoreCachedDescriptor=function(e){return o(this,void 0,void 0,function(){return l(this,function(){return[2,i.getItem(e+'_'+this.backendName+'_descriptor').catch(function(){return null})]})})},t.prototype.restoreCachedParameters=function(e,t){return o(this,void 0,void 0,function(){var a;return l(this,function(r){switch(r.label){case 0:return[4,i.getItem(e+'_'+this.backendName+'_parameters').catch(function(){return null})];case 1:return a=r.sent(),a&&t&&t(a.byteLength,a.byteLength),[2,a];}})})},t.prototype.saveCache=function(e,t,a){return o(this,void 0,void 0,function(){return l(this,function(r){switch(r.label){case 0:return[4,Promise.all([i.setItem(e+'_'+this.backendName+'_descriptor',t),i.setItem(e+'_'+this.backendName+'_parameters',a)])];case 1:return r.sent(),[2];}})})},(t.prototype.setDescriptor=function(e){this.descriptor=e,this.placeholderContext=new u.default,this.placeholderContext.update(e.placeholders),this.kernelObj=null,this.variableMap=null,this.staticBuffer=null,this.dynamicBuffer=null},t.prototype.compile=function(){return o(this,void 0,void 0,function(){var e=this;return l(this,function(t){switch(t.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');return[4,new Promise(function(t){var a=document.createElement('script');a.type='text/javascript',a.readyState?a.onreadystatechange=function(){('loaded'==a.readyState||'complete'==a.readyState)&&(a.onreadystatechange=null,t())}:a.onload=t,a.src=d.transformUrl(e.directory+'/kernels_fallback.js'),document.getElementsByTagName('head')[0].appendChild(a)})];case 1:return t.sent(),this.kernelObj=window.dnn_fallback_kernel,[2];}})})},t.prototype.initializeStaticBuffer=function(e){return o(this,void 0,void 0,function(){var t,a,r,n,o,i;return l(this,function(l){switch(l.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');return t=this.descriptor,a=new Float32Array(t.memory_layout.static.size),this.staticBuffer=a,r=this.variableMap||new Map,this.variableMap=r,Object.entries(t.memory_layout.static.allocations).forEach(function(e){var t=e[0],n=e[1];r.set(t,new Float32Array(a.buffer,n.offset*Float32Array.BYTES_PER_ELEMENT,n.size))}),n=s.default(this.descriptor.weight_encoding),i=(o=a).set,[4,n.decode(new Uint8Array(e))];case 1:return i.apply(o,[l.sent()]),[4,this.getInputViews()];case 2:return l.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=a.buffer}),[4,this.getOutputViews()];case 3:return l.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=a.buffer}),[2];}})})},t.prototype.initializeDynamicBuffer=function(){return o(this,void 0,void 0,function(){var e,t,a,r;return l(this,function(n){switch(n.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');return e=this.descriptor,t=this.placeholderContext,a=new Float32Array(t.resolve(e.memory_layout.dynamic.size)),this.dynamicBuffer=a,r=this.variableMap||new Map,this.variableMap=r,Object.entries(e.memory_layout.dynamic.allocations).forEach(function(e){var n=e[0],o=e[1];r.set(n,new Float32Array(a.buffer,t.resolve(o.offset)*Float32Array.BYTES_PER_ELEMENT,t.resolve(o.size)))}),[4,this.getInputViews()];case 1:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=a.buffer}),[4,this.getOutputViews()];case 2:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=a.buffer}),[2];}})})},t.prototype.setPlaceholderValue=function(e){return o(this,void 0,void 0,function(){var t;return l(this,function(a){switch(a.label){case 0:if(!this.placeholderContext)throw new Error('placeholderContext is not initialized');return t=this.placeholderContext,t.update(e),t.isResolved?[4,this.initializeDynamicBuffer()]:[2];case 1:return a.sent(),[2];}})})},t.prototype.run=function(){return o(this,void 0,void 0,function(){var e,t,a,n,o,s,i,d,u,p;return l(this,function(l){switch(l.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('placeholderContext is not initialized');if(!this.variableMap)throw new Error('Variable map is not initialized');if(!this.staticBuffer)throw new Error('StaticBuffer map is not initialized');if(!this.dynamicBuffer)throw new Error('DynamicBuffer map is not initialized');e=this.variableMap,t=this.placeholderContext,a=this.descriptor.exec_infos.map(function(e){return t.resolve(e)}),n=Date.now(),o=Date.now(),s=0,l.label=1;case 1:return s<a.length?(i=Date.now(),!(1e3<=i-o))?[3,3]:(console.log('Processed '+s+'/'+a.length+' kernels in '+(i-n)+' ms'),o=i,[4,r()]):[3,5];case 2:l.sent(),l.label=3;case 3:d=a[s],u=d.inputs.map(function(t){return e.get(t)}),p=d.outputs.map(function(t){return e.get(t)}),this.kernelObj[d.entry_func_name](u,p,d.call_option),l.label=4;case 4:return s++,[3,1];case 5:return console.log('Processed '+a.length+'/'+a.length+' kernels in '+(Date.now()-n)+' ms'),[2];}})})},t.prototype.getInputViews=function(){if(this.inputs)return this.inputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.inputs=e.inputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new p.default(null,r.offset*p.default.BYTES_PER_ELEMENT,r.size,t);return n}),this.inputs},t.prototype.getOutputViews=function(){if(this.outputs)return this.outputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.outputs=e.outputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new p.default(null,r.offset*p.default.BYTES_PER_ELEMENT,r.size,t);return n}),this.outputs},t)}(c.DescriptorRunner);t.default=h},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,a){'use strict';var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var o=a(24),i=function(){function e(){}return e.prototype.decode=function(t){return r(this,void 0,void 0,function(){var a,r,l,d,u,p,c,h,f,i,_,g,b,m,s,y,f;return n(this,function(){for(a=[],r=0,l=new DataView(t.buffer,t.byteOffset),d=0;d<t.length;){for(u=l.getInt32(d,!0),d+=4,p=l.getInt32(d,!0),d+=4,c=l.getFloat32(d,!0),d+=8,h=new Float32Array(256),f=0;256>f;f++)h[f]=e.decode_table[127&f]*c*(128>f?1:-1);for(i=new Uint8Array(t.buffer,t.byteOffset+d,p),_=o.inflate(i),g=_.length,b=new Float32Array(g),m=0;m<g;m++)b[m]=h[_[m]];a.push(b),r+=g,d+=p}for(s=new Float32Array(r),y=0,f=0;f<a.length;f++)s.set(a[f],y),y+=a[f].length;return[2,s]})})},e.decode_table=[0,0.000002750000021,0.000007249999726,0.00001875000089,0.00003624999954,0.00005874999624,0.00008624999464,0.0001437500032,0.0002312500001,0.0003187500115,0.0004062500084,0.0005187499919,0.0006562499912,0.0007937499322,0.0009312499315,0.001218750025,0.00165624998,0.002093750052,0.002531250007,0.002968749963,0.003406249918,0.003843750106,0.004281249829,0.004843750037,0.005531250034,0.006218749564,0.00690624956,0.007593749557,0.008281249553,0.008968749084,0.009656248614,0.01109374966,0.01328125037,0.01546875015,0.01765624993,0.0198437497,0.02203124948,0.02421874925,0.02640625089,0.02859375067,0.03078125045,0.03296874836,0.03515625,0.03734375164,0.03953124955,0.04171875119,0.04390624911,0.04671875015,0.0501562506,0.05359374732,0.05703124776,0.06046874821,0.06390624493,0.06734374911,0.07078124583,0.07421874255,0.07765624672,0.08109374344,0.08453124017,0.08796874434,0.09140624106,0.09484373778,0.09828124195,0.10546875,0.116406247,0.127343744,0.138281256,0.149218753,0.16015625,0.171093747,0.182031244,0.192968756,0.203906253,0.21484375,0.225781247,0.236718744,0.247656256,0.2585937381,0.26953125,0.2804687619,0.291406244,0.302343756,0.3132812381,0.32421875,0.3351562619,0.346093744,0.357031256,0.3679687381,0.37890625,0.3898437619,0.400781244,0.411718756,0.4226562381,0.43359375,0.4445312619,0.458593756,0.4757812321,0.4929687381,0.5101562142,0.52734375,0.5445312262,0.5617187023,0.5789062381,0.5960937142,0.61328125,0.6304687262,0.6476562023,0.6648437381,0.6820312142,0.6992186904,0.7164062262,0.7335937023,0.7507811785,0.7679687142,0.7851561904,0.8023436666,0.8195312023,0.8367186785,0.8539061546,0.8710936904,0.8882811666,0.9054686427,0.9226561785,0.9398436546,0.9570311308,0.9742186666,0.9914061427,1],e}();t.default=i},function(e,t,a){'use strict';var r=a(0).assign,n=a(25),o=a(28),i=a(13),l={};r(l,n,o,i),e.exports=l},function(e,t,a){'use strict';function r(e){if(!(this instanceof r))return new r(e);this.options=i.assign({level:_,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:''},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var a=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(a!==c)throw new Error(s[a]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n='string'==typeof t.dictionary?l.string2buf(t.dictionary):'[object ArrayBuffer]'===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,a=o.deflateSetDictionary(this.strm,n),a!==c)throw new Error(s[a]);this._dict_set=!0}}function n(e,t){var a=new r(t);if(a.push(e,!0),a.err)throw a.msg||s[a.err];return a.result}var o=a(26),i=a(0),l=a(11),s=a(8),d=a(12),u=Object.prototype.toString,p=4,c=0,h=1,f=2,_=-1,g=0,b=8;r.prototype.push=function(e,t){var a=this.strm,r=this.options.chunkSize,n,s;if(this.ended)return!1;s=t===~~t?t:!0===t?p:0,a.input='string'==typeof e?l.string2buf(e):'[object ArrayBuffer]'===u.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(r),a.next_out=0,a.avail_out=r),n=o.deflate(a,s),n!==h&&n!==c)return this.onEnd(n),this.ended=!0,!1;(0===a.avail_out||0===a.avail_in&&(s===p||s===f))&&('string'===this.options.to?this.onData(l.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&n!==h);return s===p?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):s!==f||(this.onEnd(c),a.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===c&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=n,t.deflateRaw=function(e,t){return t=t||{},t.raw=!0,n(e,t)},t.gzip=function(e,t){return t=t||{},t.gzip=!0,n(e,t)}},function(e,t,a){'use strict';function r(e,t){return e.msg=I[t],t}function n(e){return(e<<1)-(4<e?9:0)}function o(e){for(var t=e.length;0<=--t;)e[t]=0}function i(e){var t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out);0===a||(E.arraySet(e.output,t.pending_buf,t.pending_out,a,e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))}function l(e,t){k._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,i(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function c(e,t,a,r){var n=e.avail_in;return(n>r&&(n=r),0===n)?0:(e.avail_in-=n,E.arraySet(t,e.input,e.next_in,n,a),1===e.state.wrap?e.adler=C(e.adler,t,n,a):2===e.state.wrap&&(e.adler=T(e.adler,t,n,a)),e.next_in+=n,e.total_in+=n,n)}function p(e,t){var a=e.max_chain_length,r=e.strstart,n=e.prev_length,o=e.nice_match,i=e.strstart>e.w_size-K?e.strstart-(e.w_size-K):0,l=e.window,s=e.w_mask,d=e.prev,u=e.strstart+Z,p=l[r+n-1],c=l[r+n],h,f;e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(h=t,l[h+n]!==c||l[h+n-1]!==p||l[h]!==l[r]||l[++h]!==l[r+1])continue;r+=2,h++;do;while(l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&l[++r]===l[++h]&&r<u);if(f=Z-(u-r),r=u-Z,f>n){if(e.match_start=t,n=f,f>=o)break;p=l[r+n-1],c=l[r+n]}}while((t=d[t&s])>i&&0!=--a);return n<=e.lookahead?n:e.lookahead}function h(e){var t=e.w_size,a,r,n,o,i;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-K)){E.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,a=r;do n=e.head[--a],e.head[a]=n>=t?n-t:0;while(--r);r=t,a=r;do n=e.prev[--a],e.prev[a]=n>=t?n-t:0;while(--r);o+=t}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=Y)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+Y-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Y)););}while(e.lookahead<K&&0!==e.strm.avail_in)}function s(e,t){for(var a,r;;){if(e.lookahead<K){if(h(e),e.lookahead<K&&t===S)return re;if(0===e.lookahead)break}if(a=0,e.lookahead>=Y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-K&&(e.match_length=p(e,a)),!(e.match_length>=Y))r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(r=k._tr_tally(e,e.strstart-e.match_start,e.match_length-Y),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Y){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(r&&(l(e,!1),0===e.strm.avail_out))return re}return e.insert=e.strstart<Y-1?e.strstart:Y-1,t===R?(l(e,!0),0===e.strm.avail_out?oe:ie):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?re:ne}function f(e,t){for(var a,r,n;;){if(e.lookahead<K){if(h(e),e.lookahead<K&&t===S)return re;if(0===e.lookahead)break}if(a=0,e.lookahead>=Y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Y-1,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-K&&(e.match_length=p(e,a),5>=e.match_length&&(e.strategy===N||e.match_length===Y&&4096<e.strstart-e.match_start)&&(e.match_length=Y-1)),e.prev_length>=Y&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-Y,r=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Y),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=Y-1,e.strstart++,r&&(l(e,!1),0===e.strm.avail_out))return re}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(r=k._tr_tally(e,0,e.window[e.strstart-1]),r&&l(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return re}return e.match_available&&(r=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Y-1?e.strstart:Y-1,t===R?(l(e,!0),0===e.strm.avail_out?oe:ie):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?re:ne}function _(e,t){for(var a=e.window,r,n,o,i;;){if(e.lookahead<=Z){if(h(e),e.lookahead<=Z&&t===S)return re;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=Y&&0<e.strstart&&(o=e.strstart-1,n=a[o],n===a[++o]&&n===a[++o]&&n===a[++o])){i=e.strstart+Z;do;while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<i);e.match_length=Z-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Y?(r=k._tr_tally(e,1,e.match_length-Y),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(l(e,!1),0===e.strm.avail_out))return re}return e.insert=0,t===R?(l(e,!0),0===e.strm.avail_out?oe:ie):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?re:ne}function g(e,t){for(var a;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===S)return re;break}if(e.match_length=0,a=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(l(e,!1),0===e.strm.avail_out))return re}return e.insert=0,t===R?(l(e,!0),0===e.strm.avail_out?oe:ie):e.last_lit&&(l(e,!1),0===e.strm.avail_out)?re:ne}function b(e,t,a,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=r,this.func=n}function m(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=le[e.level].max_lazy,e.good_match=le[e.level].good_length,e.nice_match=le[e.level].nice_length,e.max_chain_length=le[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Y-1,e.match_available=0,e.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*V),this.dyn_dtree=new E.Buf16(2*(2*G+1)),this.bl_tree=new E.Buf16(2*(2*H+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(X+1),this.heap=new E.Buf16(2*j+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*j+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=M,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?q:te,e.adler=2===t.wrap?0:1,t.last_flush=S,k._tr_init(t),D):r(e,A)}function w(e){var t=v(e);return t===D&&m(e.state),t}function x(e,t,a,n,o,i){if(!e)return A;var l=1;if(t===O&&(t=6),0>n?(l=0,n=-n):15<n&&(l=2,n-=16),1>o||o>W||a!==U||8>n||15<n||0>t||9<t||0>i||i>F)return r(e,A);8===n&&(n=9);var d=new y;return e.state=d,d.strm=e,d.wrap=l,d.gzhead=null,d.w_bits=n,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=o+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+Y-1)/Y),d.window=new E.Buf8(2*d.w_size),d.head=new E.Buf16(d.hash_size),d.prev=new E.Buf16(d.w_size),d.lit_bufsize=1<<o+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new E.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=i,d.method=a,w(e)}var E=a(0),k=a(27),C=a(9),T=a(10),I=a(8),S=0,R=4,B=5,D=0,P=1,A=-2,z=-5,O=-1,N=1,L=2,F=4,M=2,U=8,W=9,j=256+1+29,G=30,H=19,V=2*j+1,X=15,Y=3,Z=258,K=Z+Y+1,q=42,Q=69,J=73,$=91,ee=103,te=113,ae=666,re=1,ne=2,oe=3,ie=4,le;le=[new b(0,0,0,0,function(e,t){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(1>=e.lookahead){if(h(e),0===e.lookahead&&t===S)return re;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+a;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,l(e,!1),0===e.strm.avail_out))return re;if(e.strstart-e.block_start>=e.w_size-K&&(l(e,!1),0===e.strm.avail_out))return re}return e.insert=0,t===R?(l(e,!0),0===e.strm.avail_out?oe:ie):e.strstart>e.block_start&&(l(e,!1),0===e.strm.avail_out)?re:re}),new b(4,4,8,4,s),new b(4,5,16,8,s),new b(4,6,32,32,s),new b(4,4,16,16,f),new b(8,16,32,32,f),new b(8,16,128,128,f),new b(8,32,128,256,f),new b(32,128,258,1024,f),new b(32,258,258,4096,f)],t.deflateInit=function(e,t){return x(e,t,U,15,8,0)},t.deflateInit2=x,t.deflateReset=w,t.deflateResetKeep=v,t.deflateSetHeader=function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,D):A:A},t.deflate=function(e,t){var a,l,s,p;if(!e||!e.state||t>B||0>t)return e?r(e,A):A;if(l=e.state,!e.output||!e.input&&0!==e.avail_in||l.status===ae&&t!==R)return r(e,0===e.avail_out?z:A);if(l.strm=e,a=l.last_flush,l.last_flush=t,l.status===q)if(2===l.wrap)e.adler=0,d(l,31),d(l,139),d(l,8),l.gzhead?(d(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),d(l,255&l.gzhead.time),d(l,255&l.gzhead.time>>8),d(l,255&l.gzhead.time>>16),d(l,255&l.gzhead.time>>24),d(l,9===l.level?2:l.strategy>=L||2>l.level?4:0),d(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(d(l,255&l.gzhead.extra.length),d(l,255&l.gzhead.extra.length>>8)),l.gzhead.hcrc&&(e.adler=T(e.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=Q):(d(l,0),d(l,0),d(l,0),d(l,0),d(l,0),d(l,9===l.level?2:l.strategy>=L||2>l.level?4:0),d(l,3),l.status=te);else{var c=U+(l.w_bits-8<<4)<<8,h=-1;h=l.strategy>=L||2>l.level?0:6>l.level?1:6===l.level?2:3,c|=h<<6,0!==l.strstart&&(c|=32),c+=31-c%31,l.status=te,u(l,c),0!==l.strstart&&(u(l,e.adler>>>16),u(l,65535&e.adler)),e.adler=1}if(l.status===Q)if(l.gzhead.extra){for(s=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&!(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),i(e),s=l.pending,l.pending===l.pending_buf_size));)d(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=J)}else l.status=J;if(l.status===J)if(l.gzhead.name){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),i(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.gzindex=0,l.status=$)}else l.status=$;if(l.status===$)if(l.gzhead.comment){s=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),i(e),s=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,d(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>s&&(e.adler=T(e.adler,l.pending_buf,l.pending-s,s)),0===p&&(l.status=ee)}else l.status=ee;if(l.status===ee&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&i(e),l.pending+2<=l.pending_buf_size&&(d(l,255&e.adler),d(l,255&e.adler>>8),e.adler=0,l.status=te)):l.status=te),0!==l.pending){if(i(e),0===e.avail_out)return l.last_flush=-1,D;}else if(0===e.avail_in&&n(t)<=n(a)&&t!==R)return r(e,z);if(l.status===ae&&0!==e.avail_in)return r(e,z);if(0!==e.avail_in||0!==l.lookahead||t!==S&&l.status!==ae){var f=l.strategy===L?g(l,t):l.strategy===3?_(l,t):le[l.level].func(l,t);if((f===oe||f===ie)&&(l.status=ae),f===re||f===oe)return 0===e.avail_out&&(l.last_flush=-1),D;if(f===ne&&(t===1?k._tr_align(l):t!==B&&(k._tr_stored_block(l,0,0,!1),t===3&&(o(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),i(e),0===e.avail_out))return l.last_flush=-1,D}return t===R?0>=l.wrap?P:(2===l.wrap?(d(l,255&e.adler),d(l,255&e.adler>>8),d(l,255&e.adler>>16),d(l,255&e.adler>>24),d(l,255&e.total_in),d(l,255&e.total_in>>8),d(l,255&e.total_in>>16),d(l,255&e.total_in>>24)):(u(l,e.adler>>>16),u(l,65535&e.adler)),i(e),0<l.wrap&&(l.wrap=-l.wrap),0===l.pending?P:D):D},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status,t!==q&&t!==Q&&t!==J&&t!==$&&t!==ee&&t!==te&&t!==ae)?r(e,A):(e.state=null,t===te?r(e,-3):D):A},t.deflateSetDictionary=function(e,t){var a=t.length,r,i,l,n,s,d,u,p;if(!e||!e.state)return A;if(r=e.state,n=r.wrap,2===n||1===n&&r.status!==q||r.lookahead)return A;for(1===n&&(e.adler=C(e.adler,t,a,0)),r.wrap=0,a>=r.w_size&&(0===n&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new E.Buf8(r.w_size),E.arraySet(p,t,a-r.w_size,r.w_size,0),t=p,a=r.w_size),s=e.avail_in,d=e.next_in,u=e.input,e.avail_in=a,e.next_in=0,e.input=t,h(r);r.lookahead>=Y;){i=r.strstart,l=r.lookahead-(Y-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+Y-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--l);r.strstart=i,r.lookahead=Y-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Y-1,r.match_available=0,e.next_in=d,e.input=u,e.avail_in=s,r.wrap=n,D},t.deflateInfo='pako deflate (from Nodeca project)'},function(e,t,a){'use strict';function r(e){for(var t=e.length;0<=--t;)e[t]=0}function o(e,t,a,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=r,this.max_length=n,this.has_stree=e&&e.length}function n(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function i(e){return 256>e?J[e]:J[256+(e>>>7)]}function l(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function d(e,t,a){e.bi_valid>U-a?(e.bi_buf|=65535&t<<e.bi_valid,l(e,e.bi_buf),e.bi_buf=t>>U-e.bi_valid,e.bi_valid+=a-U):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=a)}function u(e,t,a){d(e,a[2*t],a[2*t+1])}function s(e,t){var a=0;do a|=1&e,e>>>=1,a<<=1;while(0<--t);return a>>>1}function p(e){16===e.bi_valid?(l(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var a=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,d=t.stat_desc.max_length,u=0,p,c,n,h,_,g;for(h=0;h<=M;h++)e.bl_count[h]=0;for(a[2*e.heap[e.heap_max]+1]=0,p=e.heap_max+1;p<F;p++)(c=e.heap[p],h=a[2*a[2*c+1]+1]+1,h>d&&(h=d,u++),a[2*c+1]=h,!(c>r))&&(e.bl_count[h]++,_=0,c>=s&&(_=l[c-s]),g=a[2*c],e.opt_len+=g*(h+_),i&&(e.static_len+=g*(o[2*c+1]+_)));if(0!=u){do{for(h=d-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[d]--,u-=2}while(0<u);for(h=d;0!==h;h--)for(c=e.bl_count[h];0!==c;)(n=e.heap[--p],!(n>r))&&(a[2*n+1]!==h&&(e.opt_len+=(h-a[2*n+1])*a[2*n],a[2*n+1]=h),c--)}}function h(e,t,a){var r=Array(M+1),o=0,i,l;for(i=1;i<=M;i++)r[i]=o=o+a[i-1]<<1;for(l=0;l<=t;l++){var n=e[2*l+1];0!==n&&(e[2*l]=s(r[n]++,n))}}function f(){var e=Array(M+1),t,a,r,n,i;for(r=0,n=0;n<A-1;n++)for(ee[n]=r,t=0;t<1<<X[n];t++)$[r++]=n;for($[r-1]=n,i=0,n=0;16>n;n++)for(te[n]=i,t=0;t<1<<Y[n];t++)J[i++]=n;for(i>>=7;n<N;n++)for(te[n]=i<<7,t=0;t<1<<Y[n]-7;t++)J[256+i++]=n;for(a=0;a<=M;a++)e[a]=0;for(t=0;143>=t;)q[2*t+1]=8,t++,e[8]++;for(;255>=t;)q[2*t+1]=9,t++,e[9]++;for(;279>=t;)q[2*t+1]=7,t++,e[7]++;for(;287>=t;)q[2*t+1]=8,t++,e[8]++;for(h(q,O+1,e),t=0;t<N;t++)Q[2*t+1]=5,Q[2*t]=s(t,5);re=new o(q,X,z+1,O,M),ne=new o(Q,Y,0,N,M),oe=new o([],Z,0,L,W)}function _(e){var t;for(t=0;t<O;t++)e.dyn_ltree[2*t]=0;for(t=0;t<N;t++)e.dyn_dtree[2*t]=0;for(t=0;t<L;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*j]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){8<e.bi_valid?l(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function b(e,t,a,r){g(e),r&&(l(e,a),l(e,~a)),S.arraySet(e.pending_buf,e.window,t,a,e.pending),e.pending+=a}function m(e,t,a,r){var n=2*t,o=2*a;return e[n]<e[o]||e[n]===e[o]&&r[t]<=r[a]}function y(e,t,a){for(var r=e.heap[a],n=a<<1;n<=e.heap_len&&(n<e.heap_len&&m(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!m(t,r,e.heap[n],e.depth));)e.heap[a]=e.heap[n],a=n,n<<=1;e.heap[a]=r}function v(e,t,a){var r=0,n,o,l,s;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*r]<<8|e.pending_buf[e.d_buf+2*r+1],o=e.pending_buf[e.l_buf+r],r++,0===n?u(e,o,t):(l=$[o],u(e,l+z+1,t),s=X[l],0!==s&&(o-=ee[l],d(e,o,s)),n--,l=i(n),u(e,l,a),s=Y[l],0!==s&&(n-=te[l],d(e,n,s)));while(r<e.last_lit);u(e,j,t)}function w(e,t){var a=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems,l=-1,s,n,d;for(e.heap_len=0,e.heap_max=F,s=0;s<i;s++)0===a[2*s]?a[2*s+1]=0:(e.heap[++e.heap_len]=l=s,e.depth[s]=0);for(;2>e.heap_len;)d=e.heap[++e.heap_len]=2>l?++l:0,a[2*d]=1,e.depth[d]=0,e.opt_len--,o&&(e.static_len-=r[2*d+1]);for(t.max_code=l,s=e.heap_len>>1;1<=s;s--)y(e,a,s);d=i;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],y(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=n,a[2*d]=a[2*s]+a[2*n],e.depth[d]=(e.depth[s]>=e.depth[n]?e.depth[s]:e.depth[n])+1,a[2*s+1]=a[2*n+1]=d,e.heap[1]=d++,y(e,a,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],c(e,t),h(a,l,e.bl_count)}function x(e,t,a){var r=-1,o=t[1],i=0,l=7,s=4,d,n;for(0===o&&(l=138,s=3),t[2*(a+1)+1]=65535,d=0;d<=a;d++){if(n=o,o=t[2*(d+1)+1],++i<l&&n===o)continue;else i<s?e.bl_tree[2*n]+=i:0===n?10>=i?e.bl_tree[2*H]++:e.bl_tree[2*V]++:(n!==r&&e.bl_tree[2*n]++,e.bl_tree[2*G]++);i=0,r=n,0===o?(l=138,s=3):n===o?(l=6,s=3):(l=7,s=4)}}function E(e,t,a){var r=-1,o=t[1],i=0,l=7,s=4,p,n;for(0===o&&(l=138,s=3),p=0;p<=a;p++){if(n=o,o=t[2*(p+1)+1],++i<l&&n===o)continue;else if(i<s)do u(e,n,e.bl_tree);while(0!=--i);else 0===n?10>=i?(u(e,H,e.bl_tree),d(e,i-3,3)):(u(e,V,e.bl_tree),d(e,i-11,7)):(n!==r&&(u(e,n,e.bl_tree),i--),u(e,G,e.bl_tree),d(e,i-3,2));i=0,r=n,0===o?(l=138,s=3):n===o?(l=6,s=3):(l=7,s=4)}}function k(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=L-1;3<=t&&0===e.bl_tree[2*K[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function C(e,t,a,r){var n;for(d(e,t-257,5),d(e,a-1,5),d(e,r-4,4),n=0;n<r;n++)d(e,e.bl_tree[2*K[n]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,a-1)}function T(e){var t=4093624447,a;for(a=0;31>=a;a++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*a])return R;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return B;for(a=32;a<z;a++)if(0!==e.dyn_ltree[2*a])return B;return R}function I(e,t,a,r){d(e,(D<<1)+(r?1:0),3),b(e,t,a,!0)}var S=a(0),R=0,B=1,D=0,P=1,A=29,z=256,O=z+1+A,N=30,L=19,F=2*O+1,M=15,U=16,W=7,j=256,G=16,H=17,V=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(2*(O+2));r(q);var Q=Array(2*N);r(Q);var J=Array(512);r(J);var $=Array(258-3+1);r($);var ee=Array(A);r(ee);var te=Array(N);r(te);var ae=!1,re,ne,oe;t._tr_init=function(e){ae||(f(),ae=!0),e.l_desc=new n(e.dyn_ltree,re),e.d_desc=new n(e.dyn_dtree,ne),e.bl_desc=new n(e.bl_tree,oe),e.bi_buf=0,e.bi_valid=0,_(e)},t._tr_stored_block=I,t._tr_flush_block=function(e,t,a,r){var n=0,o,i;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=T(e)),w(e,e.l_desc),w(e,e.d_desc),n=k(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=a+5,a+4<=o&&-1!==t?I(e,t,a,r):e.strategy===4||i===o?(d(e,(P<<1)+(r?1:0),3),v(e,q,Q)):(d(e,(2<<1)+(r?1:0),3),C(e,e.l_desc.max_code+1,e.d_desc.max_code+1,n+1),v(e,e.dyn_ltree,e.dyn_dtree)),_(e),r&&g(e)},t._tr_tally=function(e,t,a){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*($[a]+z+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){d(e,P<<1,3),u(e,j,q),p(e)}},function(e,t,a){'use strict';function r(e){if(!(this instanceof r))return new r(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:''},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var a=o.inflateInit2(this.strm,t.windowBits);if(a!==s.Z_OK)throw new Error(d[a]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function n(e,t){var a=new r(t);if(a.push(e,!0),a.err)throw a.msg||d[a.err];return a.result}var o=a(29),i=a(0),l=a(11),s=a(13),d=a(8),u=a(12),p=a(32),c=Object.prototype.toString;r.prototype.push=function(e,t){var a=this.strm,r=this.options.chunkSize,n=this.options.dictionary,d=!1,u,p,h,f,_,g;if(this.ended)return!1;p=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,a.input='string'==typeof e?l.binstring2buf(e):'[object ArrayBuffer]'===c.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(r),a.next_out=0,a.avail_out=r),u=o.inflate(a,s.Z_NO_FLUSH),u===s.Z_NEED_DICT&&n&&(g='string'==typeof n?l.string2buf(n):'[object ArrayBuffer]'===c.call(n)?new Uint8Array(n):n,u=o.inflateSetDictionary(this.strm,g)),u===s.Z_BUF_ERROR&&!0==d&&(u=s.Z_OK,d=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),this.ended=!0,!1;a.next_out&&(0===a.avail_out||u===s.Z_STREAM_END||0===a.avail_in&&(p===s.Z_FINISH||p===s.Z_SYNC_FLUSH))&&('string'===this.options.to?(h=l.utf8border(a.output,a.next_out),f=a.next_out-h,_=l.buf2string(a.output,h),a.next_out=f,a.avail_out=r-f,f&&i.arraySet(a.output,a.output,h,f,0),this.onData(_)):this.onData(i.shrinkBuf(a.output,a.next_out))),0===a.avail_in&&0===a.avail_out&&(d=!0)}while((0<a.avail_in||0===a.avail_out)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(p=s.Z_FINISH),p===s.Z_FINISH?(u=o.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):p!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),a.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===s.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=n,t.inflateRaw=function(e,t){return t=t||{},t.raw=!0,n(e,t)},t.ungzip=n},function(t,a,r){'use strict';function o(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg='',t.wrap&&(e.adler=1&t.wrap),t.mode=T,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new c.Buf32(re),t.distcode=t.distdyn=new c.Buf32(ne),t.sane=1,t.back=-1,w):x}function l(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):x}function s(e,t){var a,r;return e&&e.state?(r=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?x:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=a,r.wbits=t,l(e)):x}function d(e,t){var a,r;return e?(r=new n,e.state=r,r.window=null,a=s(e,t),a!==w&&(e.state=null),a):x}function u(e){if(oe){var t;for(ie=new c.Buf32(512),le=new c.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(g(b,e.lens,0,288,ie,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;g(m,e.lens,0,32,le,0,e.work,{bits:5}),oe=!1}e.lencode=ie,e.lenbits=9,e.distcode=le,e.distbits=5}function p(e,t,a,r){var n=e.state,o;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new c.Buf8(n.wsize)),r>=n.wsize?(c.arraySet(n.window,t,a-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(o=n.wsize-n.wnext,o>r&&(o=r),c.arraySet(n.window,t,a-r,o,n.wnext),r-=o,r?(c.arraySet(n.window,t,a-r,r,0),n.wnext=r,n.whave=n.wsize):(n.wnext+=o,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=o))),0}var c=r(0),h=r(9),f=r(10),_=r(30),g=r(31),b=1,m=2,y=4,v=6,w=0,x=-2,E=-3,k=-4,C=8,T=1,I=2,S=3,R=4,B=5,D=6,P=7,A=8,z=9,O=10,N=11,L=12,F=13,M=14,U=15,W=16,j=17,G=18,H=19,V=20,X=21,Y=22,Z=23,K=24,q=25,Q=26,J=27,$=28,ee=29,te=30,ae=31,re=852,ne=592,oe=!0,ie,le;a.inflateReset=l,a.inflateReset2=s,a.inflateResetKeep=i,a.inflateInit=function(e){return d(e,15)},a.inflateInit2=d,a.inflate=function(t,a){var r=0,i=new c.Buf8(4),l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],s,d,re,ne,oe,ie,le,se,de,ue,pe,ce,he,fe,_e,ge,be,me,ye,ve,we,xe,Ee,ke;if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return x;s=t.state,s.mode===L&&(s.mode=F),oe=t.next_out,re=t.output,le=t.avail_out,ne=t.next_in,d=t.input,ie=t.avail_in,se=s.hold,de=s.bits,ue=ie,pe=le,xe=w;inf_leave:for(;;)switch(s.mode){case T:if(0===s.wrap){s.mode=F;break}for(;16>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(2&s.wrap&&35615===se){s.check=0,i[0]=255&se,i[1]=255&se>>>8,s.check=f(s.check,i,2,0),se=0,de=0,s.mode=I;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&se)<<8)+(se>>8))%31){t.msg='incorrect header check',s.mode=te;break}if((15&se)!=C){t.msg='unknown compression method',s.mode=te;break}if(se>>>=4,de-=4,we=(15&se)+8,0===s.wbits)s.wbits=we;else if(we>s.wbits){t.msg='invalid window size',s.mode=te;break}s.dmax=1<<we,t.adler=s.check=1,s.mode=512&se?O:L,se=0,de=0;break;case I:for(;16>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(s.flags=se,(255&s.flags)!=C){t.msg='unknown compression method',s.mode=te;break}if(57344&s.flags){t.msg='unknown header flags set',s.mode=te;break}s.head&&(s.head.text=1&se>>8),512&s.flags&&(i[0]=255&se,i[1]=255&se>>>8,s.check=f(s.check,i,2,0)),se=0,de=0,s.mode=S;case S:for(;32>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.head&&(s.head.time=se),512&s.flags&&(i[0]=255&se,i[1]=255&se>>>8,i[2]=255&se>>>16,i[3]=255&se>>>24,s.check=f(s.check,i,4,0)),se=0,de=0,s.mode=R;case R:for(;16>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.head&&(s.head.xflags=255&se,s.head.os=se>>8),512&s.flags&&(i[0]=255&se,i[1]=255&se>>>8,s.check=f(s.check,i,2,0)),se=0,de=0,s.mode=B;case B:if(1024&s.flags){for(;16>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.length=se,s.head&&(s.head.extra_len=se),512&s.flags&&(i[0]=255&se,i[1]=255&se>>>8,s.check=f(s.check,i,2,0)),se=0,de=0}else s.head&&(s.head.extra=null);s.mode=D;case D:if(1024&s.flags&&(ce=s.length,ce>ie&&(ce=ie),ce&&(s.head&&(we=s.head.extra_len-s.length,!s.head.extra&&(s.head.extra=Array(s.head.extra_len)),c.arraySet(s.head.extra,d,ne,ce,we)),512&s.flags&&(s.check=f(s.check,d,ce,ne)),ie-=ce,ne+=ce,s.length-=ce),s.length))break inf_leave;s.length=0,s.mode=P;case P:if(2048&s.flags){if(0===ie)break inf_leave;ce=0;do we=d[ne+ce++],s.head&&we&&65536>s.length&&(s.head.name+=e(we));while(we&&ce<ie);if(512&s.flags&&(s.check=f(s.check,d,ce,ne)),ie-=ce,ne+=ce,we)break inf_leave}else s.head&&(s.head.name=null);s.length=0,s.mode=A;case A:if(4096&s.flags){if(0===ie)break inf_leave;ce=0;do we=d[ne+ce++],s.head&&we&&65536>s.length&&(s.head.comment+=e(we));while(we&&ce<ie);if(512&s.flags&&(s.check=f(s.check,d,ce,ne)),ie-=ce,ne+=ce,we)break inf_leave}else s.head&&(s.head.comment=null);s.mode=z;case z:if(512&s.flags){for(;16>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(se!==(65535&s.check)){t.msg='header crc mismatch',s.mode=te;break}se=0,de=0}s.head&&(s.head.hcrc=1&s.flags>>9,s.head.done=!0),t.adler=s.check=0,s.mode=L;break;case O:for(;32>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}t.adler=s.check=o(se),se=0,de=0,s.mode=N;case N:if(0===s.havedict)return t.next_out=oe,t.avail_out=le,t.next_in=ne,t.avail_in=ie,s.hold=se,s.bits=de,2;t.adler=s.check=1,s.mode=L;case L:if(a===5||a===v)break inf_leave;case F:if(s.last){se>>>=7&de,de-=7&de,s.mode=J;break}for(;3>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}switch(s.last=1&se,se>>>=1,de-=1,3&se){case 0:s.mode=M;break;case 1:if(u(s),s.mode=V,a===v){se>>>=2,de-=2;break inf_leave}break;case 2:s.mode=j;break;case 3:t.msg='invalid block type',s.mode=te;}se>>>=2,de-=2;break;case M:for(se>>>=7&de,de-=7&de;32>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if((65535&se)!=(65535^se>>>16)){t.msg='invalid stored block lengths',s.mode=te;break}if(s.length=65535&se,se=0,de=0,s.mode=U,a===v)break inf_leave;case U:s.mode=W;case W:if(ce=s.length,ce){if(ce>ie&&(ce=ie),ce>le&&(ce=le),0===ce)break inf_leave;c.arraySet(re,d,ne,ce,oe),ie-=ce,ne+=ce,le-=ce,oe+=ce,s.length-=ce;break}s.mode=L;break;case j:for(;14>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(s.nlen=(31&se)+257,se>>>=5,de-=5,s.ndist=(31&se)+1,se>>>=5,de-=5,s.ncode=(15&se)+4,se>>>=4,de-=4,286<s.nlen||30<s.ndist){t.msg='too many length or distance symbols',s.mode=te;break}s.have=0,s.mode=G;case G:for(;s.have<s.ncode;){for(;3>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.lens[l[s.have++]]=7&se,se>>>=3,de-=3}for(;19>s.have;)s.lens[l[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,Ee={bits:s.lenbits},xe=g(0,s.lens,0,19,s.lencode,0,s.work,Ee),s.lenbits=Ee.bits,xe){t.msg='invalid code lengths set',s.mode=te;break}s.have=0,s.mode=H;case H:for(;s.have<s.nlen+s.ndist;){for(;;){if(r=s.lencode[se&(1<<s.lenbits)-1],_e=r>>>24,ge=255&r>>>16,be=65535&r,_e<=de)break;if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(16>be)se>>>=_e,de-=_e,s.lens[s.have++]=be;else{if(16===be){for(ke=_e+2;de<ke;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(se>>>=_e,de-=_e,0===s.have){t.msg='invalid bit length repeat',s.mode=te;break}we=s.lens[s.have-1],ce=3+(3&se),se>>>=2,de-=2}else if(17===be){for(ke=_e+3;de<ke;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}se>>>=_e,de-=_e,we=0,ce=3+(7&se),se>>>=3,de-=3}else{for(ke=_e+7;de<ke;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}se>>>=_e,de-=_e,we=0,ce=11+(127&se),se>>>=7,de-=7}if(s.have+ce>s.nlen+s.ndist){t.msg='invalid bit length repeat',s.mode=te;break}for(;ce--;)s.lens[s.have++]=we}}if(s.mode===te)break;if(0===s.lens[256]){t.msg='invalid code -- missing end-of-block',s.mode=te;break}if(s.lenbits=9,Ee={bits:s.lenbits},xe=g(b,s.lens,0,s.nlen,s.lencode,0,s.work,Ee),s.lenbits=Ee.bits,xe){t.msg='invalid literal/lengths set',s.mode=te;break}if(s.distbits=6,s.distcode=s.distdyn,Ee={bits:s.distbits},xe=g(m,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,Ee),s.distbits=Ee.bits,xe){t.msg='invalid distances set',s.mode=te;break}if(s.mode=V,a===v)break inf_leave;case V:s.mode=X;case X:if(6<=ie&&258<=le){t.next_out=oe,t.avail_out=le,t.next_in=ne,t.avail_in=ie,s.hold=se,s.bits=de,_(t,pe),oe=t.next_out,re=t.output,le=t.avail_out,ne=t.next_in,d=t.input,ie=t.avail_in,se=s.hold,de=s.bits,s.mode===L&&(s.back=-1);break}for(s.back=0;;){if(r=s.lencode[se&(1<<s.lenbits)-1],_e=r>>>24,ge=255&r>>>16,be=65535&r,_e<=de)break;if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(ge&&0==(240&ge)){for(me=_e,ye=ge,ve=be;;){if(r=s.lencode[ve+((se&(1<<me+ye)-1)>>me)],_e=r>>>24,ge=255&r>>>16,be=65535&r,me+_e<=de)break;if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}se>>>=me,de-=me,s.back+=me}if(se>>>=_e,de-=_e,s.back+=_e,s.length=be,0===ge){s.mode=Q;break}if(32&ge){s.back=-1,s.mode=L;break}if(64&ge){t.msg='invalid literal/length code',s.mode=te;break}s.extra=15&ge,s.mode=Y;case Y:if(s.extra){for(ke=s.extra;de<ke;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.length+=se&(1<<s.extra)-1,se>>>=s.extra,de-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=Z;case Z:for(;;){if(r=s.distcode[se&(1<<s.distbits)-1],_e=r>>>24,ge=255&r>>>16,be=65535&r,_e<=de)break;if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(0==(240&ge)){for(me=_e,ye=ge,ve=be;;){if(r=s.distcode[ve+((se&(1<<me+ye)-1)>>me)],_e=r>>>24,ge=255&r>>>16,be=65535&r,me+_e<=de)break;if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}se>>>=me,de-=me,s.back+=me}if(se>>>=_e,de-=_e,s.back+=_e,64&ge){t.msg='invalid distance code',s.mode=te;break}s.offset=be,s.extra=15&ge,s.mode=K;case K:if(s.extra){for(ke=s.extra;de<ke;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}s.offset+=se&(1<<s.extra)-1,se>>>=s.extra,de-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg='invalid distance too far back',s.mode=te;break}s.mode=q;case q:if(0===le)break inf_leave;if(ce=pe-le,s.offset>ce){if(ce=s.offset-ce,ce>s.whave&&s.sane){t.msg='invalid distance too far back',s.mode=te;break}ce>s.wnext?(ce-=s.wnext,he=s.wsize-ce):he=s.wnext-ce,ce>s.length&&(ce=s.length),fe=s.window}else fe=re,he=oe-s.offset,ce=s.length;ce>le&&(ce=le),le-=ce,s.length-=ce;do re[oe++]=fe[he++];while(--ce);0===s.length&&(s.mode=X);break;case Q:if(0===le)break inf_leave;re[oe++]=s.length,le--,s.mode=X;break;case J:if(s.wrap){for(;32>de;){if(0===ie)break inf_leave;ie--,se|=d[ne++]<<de,de+=8}if(pe-=le,t.total_out+=pe,s.total+=pe,pe&&(t.adler=s.check=s.flags?f(s.check,re,pe,oe-pe):h(s.check,re,pe,oe-pe)),pe=le,(s.flags?se:o(se))!==s.check){t.msg='incorrect data check',s.mode=te;break}se=0,de=0}s.mode=$;case $:if(s.wrap&&s.flags){for(;32>de;){if(0===ie)break inf_leave;ie--,se+=d[ne++]<<de,de+=8}if(se!==(4294967295&s.total)){t.msg='incorrect length check',s.mode=te;break}se=0,de=0}s.mode=ee;case ee:xe=1;break inf_leave;case te:xe=E;break inf_leave;case ae:return k;case 32:default:return x;}return(t.next_out=oe,t.avail_out=le,t.next_in=ne,t.avail_in=ie,s.hold=se,s.bits=de,(s.wsize||pe!==t.avail_out&&s.mode<te&&(s.mode<J||a!==y))&&p(t,t.output,t.next_out,pe-t.avail_out))?(s.mode=ae,k):(ue-=t.avail_in,pe-=t.avail_out,t.total_in+=ue,t.total_out+=pe,s.total+=pe,s.wrap&&pe&&(t.adler=s.check=s.flags?f(s.check,re,pe,t.next_out-pe):h(s.check,re,pe,t.next_out-pe)),t.data_type=s.bits+(s.last?64:0)+(s.mode===L?128:0)+(s.mode===V||s.mode===U?256:0),(0===ue&&0===pe||a===y)&&xe===w&&(xe=-5),xe)},a.inflateEnd=function(e){if(!e||!e.state)return x;var t=e.state;return t.window&&(t.window=null),e.state=null,w},a.inflateGetHeader=function(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap))?x:(a.head=t,t.done=!1,w):x},a.inflateSetDictionary=function(e,t){var a=t.length,r,n,o;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==N)?x:r.mode===N&&(n=1,n=h(n,t,a,0),n!==r.check)?E:(o=p(e,t,a,a),o)?(r.mode=ae,k):(r.havedict=1,w):x},a.inflateInfo='pako inflate (from Nodeca project)'},function(e){'use strict';var t=30;e.exports=function(e,a){var r,n,o,i,l,s,d,u,p,c,h,f,_,g,b,m,y,v,w,x,E,k,C,T,I;r=e.state,n=e.next_in,T=e.input,o=n+(e.avail_in-5),i=e.next_out,I=e.output,l=i-(a-e.avail_out),s=i+(e.avail_out-257),d=r.dmax,u=r.wsize,p=r.whave,c=r.wnext,h=r.window,f=r.hold,_=r.bits,g=r.lencode,b=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;top:do{15>_&&(f+=T[n++]<<_,_+=8,f+=T[n++]<<_,_+=8),v=g[f&m];dolen:for(;;){if(w=v>>>24,f>>>=w,_-=w,w=255&v>>>16,0===w)I[i++]=65535&v;else if(16&w){x=65535&v,w&=15,w&&(_<w&&(f+=T[n++]<<_,_+=8),x+=f&(1<<w)-1,f>>>=w,_-=w),15>_&&(f+=T[n++]<<_,_+=8,f+=T[n++]<<_,_+=8),v=b[f&y];dodist:for(;;){if(w=v>>>24,f>>>=w,_-=w,w=255&v>>>16,16&w){if(E=65535&v,w&=15,_<w&&(f+=T[n++]<<_,_+=8,_<w&&(f+=T[n++]<<_,_+=8)),E+=f&(1<<w)-1,E>d){e.msg='invalid distance too far back',r.mode=t;break top}if(f>>>=w,_-=w,w=i-l,E>w){if(w=E-w,w>p&&r.sane){e.msg='invalid distance too far back',r.mode=t;break top}if(k=0,C=h,0===c){if(k+=u-w,w<x){x-=w;do I[i++]=h[k++];while(--w);k=i-E,C=I}}else if(c<w){if(k+=u+c-w,w-=c,w<x){x-=w;do I[i++]=h[k++];while(--w);if(k=0,c<x){w=c,x-=w;do I[i++]=h[k++];while(--w);k=i-E,C=I}}}else if(k+=c-w,w<x){x-=w;do I[i++]=h[k++];while(--w);k=i-E,C=I}for(;2<x;)I[i++]=C[k++],I[i++]=C[k++],I[i++]=C[k++],x-=3;x&&(I[i++]=C[k++],1<x&&(I[i++]=C[k++]))}else{k=i-E;do I[i++]=I[k++],I[i++]=I[k++],I[i++]=I[k++],x-=3;while(2<x);x&&(I[i++]=I[k++],1<x&&(I[i++]=I[k++]))}}else if(0==(64&w)){v=b[(65535&v)+(f&(1<<w)-1)];continue dodist}else{e.msg='invalid distance code',r.mode=t;break top}break}}else if(0==(64&w)){v=g[(65535&v)+(f&(1<<w)-1)];continue dolen}else if(32&w){r.mode=12;break top}else{e.msg='invalid literal/length code',r.mode=t;break top}break}}while(n<o&&i<s);return x=_>>3,n-=x,_-=x<<3,f&=(1<<_)-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=i<s?257+(s-i):257-(i-s),r.hold=f,void(r.bits=_)}},function(e,t,a){'use strict';var r=a(0),n=15,o=852,i=592,l=0,s=1,d=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,a,f,_,g,b,m){var y=m.bits,v=0,w=0,x=0,E=0,k=0,C=0,T=0,I=0,S=0,R=0,B=null,D=0,P=new r.Buf16(n+1),A=new r.Buf16(n+1),z=null,O=0,N,L,F,M,U,W,j,G,H;for(v=0;v<=n;v++)P[v]=0;for(w=0;w<f;w++)P[t[a+w]]++;for(k=y,E=n;1<=E&&0===P[E];E--);if(k>E&&(k=E),0==E)return _[g++]=20971520,_[g++]=20971520,m.bits=1,0;for(x=1;x<E&&0===P[x];x++);for(k<x&&(k=x),I=1,v=1;v<=n;v++)if(I<<=1,I-=P[v],0>I)return-1;if(0<I&&(e===l||1!=E))return-1;for(A[1]=0,v=1;v<n;v++)A[v+1]=A[v]+P[v];for(w=0;w<f;w++)0!==t[a+w]&&(b[A[t[a+w]]++]=w);if(e===l?(B=z=b,W=19):e===s?(B=u,D-=257,z=p,O-=257,W=256):(B=c,z=h,W=-1),R=0,w=0,v=x,U=g,C=k,T=0,F=-1,S=1<<k,M=S-1,e===s&&S>o||e===d&&S>i)return 1;for(;;){j=v-T,b[w]<W?(G=0,H=b[w]):b[w]>W?(G=z[O+b[w]],H=B[D+b[w]]):(G=96,H=0),N=1<<v-T,L=1<<C,x=L;do L-=N,_[U+(R>>T)+L]=0|(j<<24|G<<16|H);while(0!==L);for(N=1<<v-1;R&N;)N>>=1;if(0===N?R=0:(R&=N-1,R+=N),w++,0==--P[v]){if(v==E)break;v=t[a+b[w]]}if(v>k&&(R&M)!==F){for(0==T&&(T=k),U+=x,C=v-T,I=1<<C;C+T<E&&(I-=P[C+T],!(0>=I));)C++,I<<=1;if(S+=1<<C,e===s&&S>o||e===d&&S>i)return 1;F=R&M,_[F]=0|(k<<24|C<<16|U-g)}}return 0!==R&&(_[U+R]=0|(4194304|v-T<<24)),m.bits=k,0}},function(e){'use strict';e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(e,t){'use strict';var a=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(){}return e.prototype.decode=function(e){return a(this,void 0,void 0,function(){return r(this,function(){return[2,new Float32Array(e.buffer,e.byteOffset,e.byteLength/4)]})})},e}();t.default=n},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=-1,r=function(){function e(){this.scheduledCallbackId=a}return e.prototype.request=function(e){var t=this;this.fn=e,this.scheduledCallbackId==a&&(this.scheduledCallbackId=requestAnimationFrame(function(){return t.forceDispatch()}))},e.prototype.forceDispatch=function(){this.scheduledCallbackId==a||(this.cancel(),this.fn())},e.prototype.cancel=function(){this.scheduledCallbackId==a||(cancelAnimationFrame(this.scheduledCallbackId),this.scheduledCallbackId=a)},e}();t.default=r},function(e,t){'use strict';function a(e){for(var t=[],r=0,n;r<e.length;r++)n=e[r],n instanceof Array?t.splice(t.length,0,a(n)):t[t.length]=n;return t}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t,a,r){if(void 0===e&&(e=null),void 0===t&&(t=0),void 0===r&&(r=null),this.placeholderContext=r,this._byteOffset=t,this._buffer=e,e)this._length=void 0===a?e.byteLength/this.BYTES_PER_ELEMENT:a;else{if(void 0===a)throw Error('"butter" or "length" must be specified.');this._length=a}if(this.isDynamic&&!r)throw Error('PlaceholderContext must be required when SymbolicTypedArray is initialized as dynamic buffer view.')}return Object.defineProperty(e.prototype,'buffer',{get:function(){return this._buffer||(this._buffer=new ArrayBuffer(this.byteOffset+this.byteLength)),this._buffer},set:function(e){this._buffer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'byteLength',{get:function(){return this.length*this.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'offset',{get:function(){return this.byteOffset/this.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'isDynamic',{get:function(){return'number'!=typeof this._byteOffset||'number'!=typeof this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'length',{get:function(){return this.isDynamic?this.placeholderContext.resolve(this._length):this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'byteOffset',{get:function(){return this.isDynamic?this.placeholderContext.resolve(this._byteOffset):this._byteOffset},enumerable:!0,configurable:!0}),e.prototype.copyWithin=function(e,t,a){return this.toActual().copyWithin(e,t,a),this},e.prototype.fill=function(e,t,a){return this.toActual().fill(e,t,a),this},e.prototype.indexOf=function(e,t){return this.toActual().indexOf(e,t)},e.prototype.join=function(e){return this.toActual().join(e)},e.prototype.lastIndexOf=function(e,t){return this.toActual().lastIndexOf(e,t)},e.prototype.sort=function(e){return this.toActual().sort(e),this},e.prototype.includes=function(e,t){return this.toActual().includes(e,t)},e.prototype.set=function(e,t){return this.toActual().set(a(e),t)},e.prototype.toLocaleString=function(){return this.toActual().toLocaleString()},e.prototype.toString=function(){return this.toActual().toString()},e.prototype[Symbol.iterator]=function(){return this.toActual()[Symbol.iterator]()},e.prototype.entries=function(){return this.toActual().entries()},e.prototype.keys=function(){return this.toActual().keys()},e.prototype.values=function(){return this.toActual().values()},e}();t.SymbolicTypedArray=r},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(3),l=a(4),s=a(1),d=a(5),u=a(6),p=a(7),c=function(e){function t(){var t=e.call(this)||this;if(t.backendName='webassembly',t.worker_promise_reject_func=null,t.worker_initial_error=null,'undefined'==typeof Worker)throw new Error('WebWorker is needed for WebAssembly backend');return'object'!=typeof WebAssembly&&console.warn('WebAssembly is not supported on this browser, trying to use asm.js code'),t}return r(t,e),t.checkAvailability=function(){return'Worker'in window},t.prototype.init=function(){if(!t.checkAvailability())throw Error('WebAssembly backend is not supported in this browser.');return Promise.resolve()},t.prototype.setDescriptorAndParameters=function(e,t){return n(this,void 0,void 0,function(){var a,r;return o(this,function(n){switch(n.label){case 0:return this.descriptor=e,this.placeholderContext=new d.default(this.descriptor.placeholders),a='object'==typeof WebAssembly?'webassembly':'asmjs',0<=window.navigator.userAgent.indexOf('iPhone OS 11_2')&&(a='asmjs'),r=this.directory+'/kernels_'+a+'.js',r=s.transformUrl(r),this.worker_entry_js_path=r,[4,this.compile()];case 1:return n.sent(),[4,this.loadWeights(new Uint8Array(t))];case 2:return n.sent(),[4,this.getInputViews()];case 3:return n.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=new Float32Array(e.length).buffer}),[4,this.getOutputViews()];case 4:return n.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=new Float32Array(e.length).buffer}),[2];}})})},t.prototype.fetchDescriptor=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(a){switch(a.label){case 0:return this.directory=e,[4,s.default(e+'/graph_'+this.backendName+'.json')];case 1:return t=a.sent(),[2,t.json()];}})})},t.prototype.fetchParameters=function(e,t){return n(this,void 0,void 0,function(){var a,r;return o(this,function(n){switch(n.label){case 0:return a=e+'/weight_'+this.backendName+'.bin',[4,s.default(a)];case 1:return r=n.sent(),[2,s.readArrayBufferProgressively(r,t)];}})})},t.prototype.restoreCachedDescriptor=function(e){return n(this,void 0,void 0,function(){return o(this,function(){return this.directory=e,[2,i.getItem(e+'_'+this.backendName+'_descriptor').catch(function(){return null})]})})},t.prototype.restoreCachedParameters=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,i.getItem(e+'_'+this.backendName+'_parameters').catch(function(){return null})];case 1:return a=r.sent(),a&&t&&t(a.byteLength,a.byteLength),[2,a];}})})},t.prototype.saveCache=function(e,t,a){return n(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Promise.all([i.setItem(e+'_'+this.backendName+'_descriptor',t),i.setItem(e+'_'+this.backendName+'_parameters',a)])];case 1:return r.sent(),[2];}})})},(t.prototype.setPlaceholderValue=function(e){return n(this,void 0,void 0,function(){var t,a,r,n,i,l,s;return o(this,function(o){switch(o.label){case 0:if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized.');if(t=this.placeholderContext,t.update(e),!t.isResolved)return[2];if(!this.descriptor)throw new Error('Descriptor is not loaded');for(a=this.descriptor,r=a.unresolved_value_lists,n=[],i=function(e){var a=r[e];a.forEach(function(a){var r=t.resolve(a.placeholder);n.push(e,a.offset,r)})},l=0;l<r.length;l++)i(l);return[4,this.getInputViews()];case 1:return o.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=new Float32Array(e.length).buffer}),[4,this.getOutputViews()];case 2:return o.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=new Float32Array(e.length).buffer}),s=this.placeholderContext.resolve(this.descriptor.memory_layout.dynamic.size),[4,this.setPlaceholderValueWorker(s,new Int32Array(n))];case 3:return o.sent(),[2];}})})},t.prototype.setPlaceholderValueWorker=function(e,t){if(!this.worker)throw Error('Worker is not initialized');var a=this.worker;return new Promise(function(r,n){a.onmessage=function(e){0===e.data?r():(console.log(e.data),a.terminate(),n(new Error(e.data)))},a.postMessage({type:'set_dynamic_buffer',size:e,data:t})})},t.prototype.compile=function(){var e=this,t=new Worker(this.worker_entry_js_path);t.onerror=function(t){console.error(t),e.worker_promise_reject_func?e.worker_promise_reject_func(t):e.worker_initial_error=t};var a=new Promise(function(a,r){return e.worker_initial_error?r(e.worker_initial_error):void(e.worker_promise_reject_func=r,t.onmessage=function(e){0===e.data?a():(console.error(e.data),t.terminate(),r(new Error(e.data)))})});return this.worker=t,a},t.prototype.loadWeights=function(e){return n(this,void 0,void 0,function(){var t=this,a,r,n,i;return o(this,function(o){switch(o.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.worker)throw new Error('Worker is not initialized');return a=l.default(this.descriptor.weight_encoding),[4,a.decode(e)];case 1:return r=o.sent(),n=this.worker,i=new Promise(function(e,a){t.worker_promise_reject_func=a,n.onmessage=function(t){0===t.data?e():(console.log(t.data),n.terminate(),a(new Error(t.data)))},n.postMessage({type:'weight',data:r},[r.buffer])}),[2,i];}})})},t.prototype.getInputViews=function(){if(this.inputs)return this.inputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.inputs=e.inputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new u.default(null,0,r.size,t);return n}),this.inputs},t.prototype.getOutputViews=function(){if(this.outputs)return this.outputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.outputs=e.outputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new u.default(null,0,r.size,t);return n}),this.outputs},t.prototype.run=function(){return n(this,void 0,void 0,function(){var e=this,t,a,r,n;return o(this,function(){if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.worker)throw new Error('Worker is not initialized');if(!this.placeholderContext.isResolved)throw new Error('Not all placeholder is resolved');return t=this.placeholderContext,a=this.descriptor,r=this.worker,n=new Promise(function(n,o){e.worker_promise_reject_func=o,r.onmessage=function(t){if(Array.isArray(t.data)){for(var a=0;a<t.data.length;a++)e.outputs[a].set(t.data[a]);n()}else console.log(t.data),r.terminate(),o(new Error(t.data))};for(var l=[a.memory_layout.static.allocations,a.memory_layout.dynamic.allocations],s=[],d=0;d<a.inputs.length;d++)for(var i=0,u;2>i;i++)if(u=l[i][a.inputs[d]],u){var p=e.inputs[d];s.push({space:i,offset:t.resolve(u.offset),size:p.length,data:p.toActual()});break}for(var c=[],d=0;d<a.outputs.length;d++)for(var i=0,u;2>i;i++)if(u=l[i][a.outputs[d]],u){var p=e.outputs[d];c.push({space:i,offset:t.resolve(u.offset),size:p.length});break}r.postMessage({type:'run',inputs:s,outputs:c})}),[2,n]})})},t)}(p.DescriptorRunner);t.default=c},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(3),l=a(38),s=a(4),d=a(1),u=a(5),p=a(6),c=a(2),h=a(14),f=a(7),_=new Float32Array([-1,1,-1,-1,1,1,1,-1]),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backendName='webgl',t}return r(t,e),t.checkAvailability=function(){return h.default.checkAvailability()},t.prototype.init=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(){if(!t.checkAvailability())throw Error('WebGL backend is not supported in this browser.');return this.handler=h.default.getInstance(),e=this.handler.createArrayBuffer(_),this.handler.bindArrayBuffer(e),this.buffers=new Map,[2]})})},t.prototype.fetchDescriptor=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(a){switch(a.label){case 0:return[4,d.default(e+'/graph_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'.json')];case 1:return t=a.sent(),[2,t.json()];}})})},t.prototype.fetchParameters=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,d.default(e+'/weight_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'.bin')];case 1:return a=r.sent(),[2,d.readArrayBufferProgressively(a,t)];}})})},t.prototype.restoreCachedDescriptor=function(e){return n(this,void 0,void 0,function(){return o(this,function(){return[2,i.getItem(e+'_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'_descriptor').catch(function(){return null})]})})},t.prototype.restoreCachedParameters=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,i.getItem(e+'_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'_parameters').catch(function(){return null})];case 1:return a=r.sent(),a&&t&&t(a.byteLength,a.byteLength),[2,a];}})})},t.prototype.saveCache=function(e,t,a){return n(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Promise.all([i.setItem(e+'_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'_descriptor',t),i.setItem(e+'_'+this.backendName+'_'+this.handler.MAX_TEXTURE_SIZE+'_parameters',a)])];case 1:return r.sent(),[2];}})})},(t.prototype.setDescriptorAndParameters=function(e,t){return n(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return[4,this.setDescriptor(e)];case 1:return a.sent(),[4,this.compile()];case 2:return a.sent(),[4,this.initializeStaticBuffer(t)];case 3:return a.sent(),this.placeholderContext&&this.placeholderContext.isResolved?[4,this.initializeDynamicBuffer()]:[3,5];case 4:a.sent(),a.label=5;case 5:return[2];}})})},t.prototype.initializeStaticBuffer=function(e){return n(this,void 0,void 0,function(){var t,a,r,n,i;return o(this,function(o){switch(o.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');return t=this.descriptor,a=s.default(this.descriptor.weight_encoding),[4,a.decode(new Uint8Array(e))];case 1:return r=o.sent(),n=this.buffers,i=t.memory_layout.mapping,Object.entries(t.memory_layout.static.allocations).forEach(function(e){var t=e[0],a=e[1],r=a.width,o=a.height,i=a.size,s=a.channel_mode;n.set(t,new l.default(i*Float32Array.BYTES_PER_ELEMENT,r,o,t,null,s))}),Object.entries(t.constants_map).forEach(function(e){var t=e[0],a=e[1],o=a.size,i=a.byte_offset;n.get(t).array.set(new Float32Array(r.buffer,i,o))}),[4,this.getInputViews()];case 2:return o.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=n.get(i[e.name]).getWriteView(0,e.length,Float32Array).buffer}),[4,this.getOutputViews()];case 3:return o.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=n.get(i[e.name]).getReadView(0,e.length,Float32Array).buffer}),[2];}})})},t.prototype.initializeDynamicBuffer=function(){return n(this,void 0,void 0,function(){var e,t,a,r;return o(this,function(n){switch(n.label){case 0:if(!this.descriptor)throw Error('GraphDescriptor is not loaded.');if(!this.placeholderContext)throw Error('PlaceholderContext is not initialized.');return e=this.descriptor,t=this.placeholderContext,a=this.buffers,r=e.memory_layout.mapping,Object.entries(e.memory_layout.dynamic.allocations).forEach(function(e){var r=e[0],n=e[1],o=n.width,i=n.height,s=n.size,d=n.channel_mode;a.set(r,new l.default(t.resolve(s)*Float32Array.BYTES_PER_ELEMENT,t.resolve(o),t.resolve(i),r,null,d))}),[4,this.getInputViews()];case 1:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=a.get(r[e.name]).getWriteView(0,t.resolve(e.length),Float32Array).buffer}),[4,this.getOutputViews()];case 2:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=a.get(r[e.name]).getReadView(0,t.resolve(e.length),Float32Array).buffer}),this.buildPipeline(),[2];}})})},t.prototype.setDescriptor=function(e){return n(this,void 0,void 0,function(){return o(this,function(){return this.descriptor=e,this.placeholderContext=new u.default(e.placeholders),[2]})})},t.prototype.compile=function(){return n(this,void 0,void 0,function(){var e=this,t;return o(this,function(){if(!this.descriptor)throw new Error('Descriptor is not loaded');return t=this.descriptor,this.programs=new Map,this.vertexShader=this.handler.createVertexShader('\n            precision highp float;\n            attribute vec2 _xy;\n            void main() { \n              gl_Position = vec4(_xy, 0, 1); \n            }\n        '),Object.keys(t.shader_sources).forEach(function(a){var r=e.handler.createFragmentShader(t.shader_sources[a]),n=e.handler.createProgram(e.vertexShader,r);e.programs.set(a,n)}),[2]})})},t.prototype.setPlaceholderValue=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(a){switch(a.label){case 0:if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized.');if(t=this.placeholderContext,t.update(e),!t.isResolved)return[2];if(!this.descriptor)throw new Error('Descriptor is not loaded');return[4,this.initializeDynamicBuffer()];case 1:if(a.sent(),0<Object.keys(this.descriptor.placeholders).length)throw Error('Currently, WebGL backend doesn\'t support Placeholder feature.');return[2];}})})},t.prototype.getInputViews=function(){var e=this;if(this.inputs)return this.inputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var t=this.descriptor,a=this.placeholderContext,r=this.descriptor.memory_layout.mapping;return this.inputs=t.inputs.map(function(t){var n=new p.default(null,0,e.buffers.get(r[t]).length,a);return n.name=t,n}),this.inputs},t.prototype.getOutputViews=function(){var e=this;if(this.outputs)return this.outputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var t=this.descriptor,a=this.placeholderContext,r=this.descriptor.memory_layout.mapping;return this.outputs=t.outputs.map(function(t){var n=new p.default(null,0,e.buffers.get(r[t]).length,a);return n.name=t,n}),this.outputs},t.prototype.buildPipeline=function(){var e=this;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');if(!this.placeholderContext.isResolved)throw new Error('Not all placeholders are resolved: '+this.placeholderContext);var t=this.handler.gl,a=this.buffers,r=this.descriptor.memory_layout.mapping,n=new Map;this.runtimeInfo={inputs:this.getInputViews().map(function(e){return a.get(r[e.name])}),outputs:this.getOutputViews().map(function(e){return a.get(r[e.name])}),programs:this.descriptor.exec_infos.map(function(o){var i=o.inputs.map(function(e){var t=a.get(r[e.variable_name]);return n.has(t)||n.set(t,0),n.set(t,n.get(t)+1),{buffer:t,uniformIndex:e.value}}),l=a.get(r[o.output]),s=e.programs.get(o.shader_name);e.handler.useProgram(s);var d=Object.keys(o.uniforms).map(function(e){var a=o.uniforms[e],r=a.type,n=a.value;switch(r){case'int':return{func:t.uniform1i,args:[t.getUniformLocation(s,e),n]};case'float':return{func:t.uniform1f,args:[t.getUniformLocation(s,e),n]};case'vec2':return{func:t.uniform2fv,args:[t.getUniformLocation(s,e),n]};case'vec3':return{func:t.uniform3fv,args:[t.getUniformLocation(s,e),n]};case'vec4':return{func:t.uniform4fv,args:[t.getUniformLocation(s,e),n]};case'ivec2':return{func:t.uniform2iv,args:[t.getUniformLocation(s,e),n]};case'ivec3':return{func:t.uniform3iv,args:[t.getUniformLocation(s,e),n]};case'ivec4':return{func:t.uniform4iv,args:[t.getUniformLocation(s,e),n]};case'sampler2D':return{func:t.uniform1i,args:[t.getUniformLocation(s,e),n]};default:throw TypeError('Incompatible type for uniform parameter: '+r);}}),u=t.getAttribLocation(s,'_xy');return{program:s,frameBuffer:e.handler.createFrameBuffer(),name:o.shader_name,width:l.textureWidth,height:l.textureHeight,inputs:i,output:l,xyAttribLoc:u,uniforms:d,disposable:[]}})};for(var o=function(e){e.inputs.forEach(function(t){var a=t.buffer,r=n.get(a)-1;0==r&&e.disposable.push(a),n.set(a,r)})},i=0,l=this.runtimeInfo.programs,s;i<l.length;i++)s=l[i],o(s)},t.prototype.run=function(){return n(this,void 0,void 0,function(){var e,t,a,r,n,i,l,s,d,u,p,h,f,g,n,b,m,v,w,x,E,k,C,n,T,I,S,R,u,B,D,P,n,b,A,z,w,O,N,n,L,F,n;return o(this,function(o){switch(o.label){case 0:if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');if(!this.placeholderContext.isResolved)throw new Error('Not all placeholders are resolved: '+this.placeholderContext);if(e=this.handler.gl,t=this.runtimeInfo,!(0<this.runtimeInfo.programs.length))return[3,29];a=0,r=t.inputs,o.label=1;case 1:return a<r.length?(n=r[a],[4,n.syncWriteViews()]):[3,4];case 2:o.sent(),o.label=3;case 3:return a++,[3,1];case 4:if(!c.getConfiguration('DEBUG',!1))return[3,18];i=[],l=0,s=0,d=t.programs,o.label=5;case 5:if(!(s<d.length))return[3,17];u=d[s],p=performance.now(),this.handler.bindFrameBuffer(u.frameBuffer,u.width,u.height),h=0,f=u.inputs,o.label=6;case 6:return h<f.length?(g=f[h],n=g.buffer,b=g.uniformIndex,[4,n.bindToReadTexture(b)]):[3,9];case 7:o.sent(),o.label=8;case 8:return h++,[3,6];case 9:for(u.output.bindToDrawTexture(),this.handler.useProgram(u.program),(m=0,v=u.uniforms);m<v.length;m++)w=v[m],w.func.apply(e,w.args);return e.vertexAttribPointer(u.xyAttribLoc,2,e.FLOAT,!0,8,0),e.enableVertexAttribArray(u.xyAttribLoc),e.drawArrays(e.TRIANGLE_STRIP,0,_.length/2),[4,this.handler.waitForComplete()];case 10:o.sent(),x=performance.now()-p,l+=x,E=[],k=0,C=u.inputs,o.label=11;case 11:return k<C.length?(n=C[k].buffer,n.unbindFromReadTexture(),[4,n.syncReadViews()]):[3,14];case 12:o.sent(),E.push(n.array.slice()),o.label=13;case 13:return k++,[3,11];case 14:return u.output.unbindFromDrawTexture(),[4,u.output.syncReadViews()];case 15:o.sent(),T=u.output.array.slice(),i.push({Kernel:u.name,"Elapsed time [ms]":x,xs:E,y:T}),o.label=16;case 16:return s++,[3,5];case 17:return I=Array.from(Object.values(i.reduce(function(e,t){return t.Kernel in e||(e[t.Kernel]={Kernel:t.Kernel,Count:0,"Elapsed time [ms]":0}),e[t.Kernel].Count++,e[t.Kernel]['Elapsed time [ms]']+=t['Elapsed time [ms]'],e},{}))),I.forEach(function(e){return e['Ratio [%]']=(e['Elapsed time [ms]']/l).toFixed(2)}),console.table(i),console.table(I),[3,25];case 18:S=0,R=t.programs,o.label=19;case 19:if(!(S<R.length))return[3,25];u=R[S],this.handler.bindFrameBuffer(u.frameBuffer,u.width,u.height),B=0,D=u.inputs,o.label=20;case 20:return B<D.length?(P=D[B],n=P.buffer,b=P.uniformIndex,[4,n.bindToReadTexture(b)]):[3,23];case 21:o.sent(),o.label=22;case 22:return B++,[3,20];case 23:for(u.output.bindToDrawTexture(),this.handler.useProgram(u.program),(A=0,z=u.uniforms);A<z.length;A++)w=z[A],w.func.apply(e,w.args);for(e.vertexAttribPointer(u.xyAttribLoc,2,e.FLOAT,!0,8,0),e.enableVertexAttribArray(u.xyAttribLoc),e.drawArrays(e.TRIANGLE_STRIP,0,_.length/2),(O=0,N=u.inputs);O<N.length;O++)n=N[O].buffer,n.unbindFromReadTexture();u.output.unbindFromDrawTexture(),o.label=24;case 24:return S++,[3,19];case 25:L=0,F=t.outputs,o.label=26;case 26:return L<F.length?(n=F[L],[4,n.syncReadViews()]):[3,29];case 27:o.sent(),o.label=28;case 28:return L++,[3,26];case 29:return[2];}})})},t)}(f.DescriptorRunner);t.default=g},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(14),l=a(15),s=function(e){function t(t,a,r,n,o,l){var s=e.call(this,t,'webgl')||this;switch(s._texture=null,s.readTextureUnitIndices=[],s.isBoundToDrawFrameBuffer=!1,s.handler=i.default.getInstance(),s.name=n,s.channelMode=l,l){case'RGBA':s.elementsPerPixel=4;break;case'R':s.elementsPerPixel=1;break;default:throw Error('Unknown channel mode');}if(i.isWebGL2(s.handler.gl))switch(l){case'RGBA':s.textureFormat=s.handler.gl.RGBA,s.textureInternalFormat=s.handler.gl.RGBA32F,s.pixelStride=4;break;case'R':s.textureFormat=s.handler.gl.RED,s.textureInternalFormat=s.handler.gl.R32F,s.pixelStride=1;break;default:throw Error('Unknown channel mode');}else s.textureFormat=s.handler.gl.RGBA,s.textureInternalFormat=s.handler.gl.RGBA,s.pixelStride=4;if(s.pixelStride<s.elementsPerPixel)throw Error('elementsPerPixel must be smaller than pixelStride');return s.array=o||new Float32Array(s.length),s.textureWidth=a,s.textureHeight=r,s}return r(t,e),Object.defineProperty(t.prototype,'texture',{get:function(){return this._texture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'length',{get:function(){return this.byteLength/Float32Array.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),t.prototype.write=function(e,t){return n(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return this.array.set(e,t),[4,this.syncWriteViews()];case 1:return a.sent(),[2];}})})},t.prototype.read=function(e,t,a){return void 0===t&&(t=0),n(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:if(e!==Float32Array)throw new Error('Currently, only Float32Array is supported for parameter \'dst\'.');return[4,this.syncReadViews()];case 1:return r.sent(),new Float32Array(this.array.buffer,t*Float32Array.BYTES_PER_ELEMENT,a),[2];}})})},t.prototype.getWriteView=function(e,t,a){return new a(this.array.buffer,e*a.BYTES_PER_ELEMENT,t)},(t.prototype.getReadView=function(e,t,a){return new a(this.array.buffer,e*a.BYTES_PER_ELEMENT,t)},t.prototype.syncWriteViews=function(){return n(this,void 0,void 0,function(){var e,t,a;return o(this,function(r){switch(r.label){case 0:return e=this.handler.gl,this.texture||this.allocateTexture(),t=this.pack(this.array),t.length!=this.textureWidth*this.textureHeight*this.pixelStride&&(a=new Float32Array(this.textureWidth*this.textureHeight*this.elementsPerPixel),a.set(t,0),t=a),[4,this.bindToReadTexture(9)];case 1:return r.sent(),e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.textureWidth,this.textureHeight,this.textureFormat,e.FLOAT,t),this.unbindFromReadTexture(),[2];}})})},t.prototype.syncReadViews=function(){return n(this,void 0,void 0,function(){var e,t,a,r;return o(this,function(){return e=this.handler.gl,t=4,a=e.RGBA,r=new Float32Array(this.textureWidth*this.textureHeight*t),this.bindToDrawTexture(),e.readPixels(0,0,this.textureWidth,this.textureHeight,a,e.FLOAT,r),this.unbindFromDrawTexture(),r=this.unpack(r),this.array.set(r.slice(0,this.length),0),[2]})})},t.prototype.bindToReadTexture=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(a){switch(a.label){case 0:if(this.isBoundToDrawFrameBuffer)throw Error('This buffer is already registered as draw buffer. You may forgot to unbind the binding while previous operations.');return(t=this.handler.gl,!!this.texture)?[3,2]:(this.allocateTexture(),[4,this.syncWriteViews()]);case 1:a.sent(),a.label=2;case 2:return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture),this.readTextureUnitIndices.push(e),[2];}})})},t.prototype.unbindFromReadTexture=function(){for(var e=this.handler.gl,t=0,a=this.readTextureUnitIndices,r;t<a.length;t++)r=a[t],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,null);this.readTextureUnitIndices=[]},t.prototype.bindToDrawTexture=function(){if(0<this.readTextureUnitIndices.length)throw Error('This buffer is already registered as read buffer. You cannot bind a texture as both read and draw texture buffer at same time.');if(this.isBoundToDrawFrameBuffer)throw Error('This buffer is already registered as draw buffer. You may forgot to unbind the binding while previous operations.');var e=this.handler.gl;this.texture||this.allocateTexture(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.isBoundToDrawFrameBuffer=!0},t.prototype.unbindFromDrawTexture=function(){if(this.isBoundToDrawFrameBuffer){var e=this.handler.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),this.isBoundToDrawFrameBuffer=!1}},t.prototype.pack=function(e){var t=this.pixelStride/this.elementsPerPixel;if(1==t)return new Float32Array(e);for(var a=new Float32Array(e.length*t),r=0;r<e.length;r++)a[r*t]=e[r];return a},t.prototype.unpack=function(e){var t=4/this.elementsPerPixel;if(1==t)return new Float32Array(e);for(var a=new Float32Array(e.length/t),r=0;r<e.length/t;r++)a[r]=e[r*t];return a},t.prototype.allocateTexture=function(){if(this.texture)throw Error('Texture is already allocated.');this._texture=this.handler.createTexture(this.textureWidth,this.textureHeight,this.textureInternalFormat,this.textureFormat)},t)}(l.Buffer);t.default=s},function(e,t,a){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function r(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var i=a(3),l=a(16),s=a(4),d=a(1),u=a(5),p=a(6),c=a(2),h=a(17),f=a(7),_=navigator.userAgent.includes('iPhone')||navigator.userAgent.includes('iPad'),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backendName='webgpu',t}return r(t,e),t.checkAvailability=function(){return h.IS_WEBGPU_SUPPORTED},t.prototype.init=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.webgpuHandler=h.default.getInstance(),[4,this.checkIncompatibleGPU()];case 1:return e.sent(),[2];}})})},t.prototype.checkIncompatibleGPU=function(){return n(this,void 0,void 0,function(){var e,t;return o(this,function(a){switch(a.label){case 0:return this.webgpuHandler.loadKernel('\n#include <metal_stdlib>\nusing namespace metal;\n        kernel void check_compatibility(\n            device uint *A[[buffer(0)]],\n            uint global_index[[thread_position_in_grid]],\n            uint thread_execution_width[[thread_execution_width]]\n        ){\n            if (global_index == 0) {\n                A[0] = thread_execution_width;\n            }\n        }','basic'),e=this.webgpuHandler.createBuffer(new Uint32Array(1)),[4,this.webgpuHandler.executeSinglePipelineState('basic.check_compatibility',{width:1,height:1,depth:1},{width:1,height:1,depth:1},[e],!0)];case 1:if(a.sent(),t=new Uint32Array(e.contents)[0],32!=t)throw new Error('Sorry, this GPU does not compatible with WebGPU (thread_execution_width == '+t+'. See checkIncompatibleGPU method of https://github.com/mil-tokyo/webdnn/blob/master/src/descriptor_runner/descriptor_runner/descriptor_runner_webgpu.ts');return[2];}})})},t.prototype.fetchDescriptor=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(a){switch(a.label){case 0:return[4,d.default(e+'/graph_'+this.backendName+'.json')];case 1:return t=a.sent(),[2,t.json()];}})})},t.prototype.fetchParameters=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,d.default(e+'/weight_'+this.backendName+'.bin')];case 1:return a=r.sent(),[2,d.readArrayBufferProgressively(a,t)];}})})},t.prototype.restoreCachedDescriptor=function(e){return n(this,void 0,void 0,function(){return o(this,function(){return[2,i.getItem(e+'_'+this.backendName+'_descriptor').catch(function(){return null})]})})},t.prototype.restoreCachedParameters=function(e,t){return n(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return[4,i.getItem(e+'_'+this.backendName+'_parameters').catch(function(){return null})];case 1:return a=r.sent(),a&&t&&t(a.byteLength,a.byteLength),[2,a];}})})},t.prototype.saveCache=function(e,t,a){return n(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Promise.all([i.setItem(e+'_'+this.backendName+'_descriptor',t),i.setItem(e+'_'+this.backendName+'_parameters',a)])];case 1:return r.sent(),[2];}})})},(t.prototype.setDescriptorAndParameters=function(e,t){return n(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return this.descriptor=e,this.staticBuffer=null,this.dynamicBuffer=null,this.metaBuffers=null,this.placeholderContext=new u.default(e.placeholders),this.executionInfos=e.exec_infos,this.webgpuHandler.loadKernel(this.descriptor.kernel_source,'descriptor'),[4,this.initializeStaticBuffer(t)];case 1:return a.sent(),[4,this.initializeMetaBuffers()];case 2:return a.sent(),[4,this.setPlaceholderValue({__MAX_THREADS_PER_THREADGROUP__:_?512:1024})];case 3:return a.sent(),this.placeholderContext&&this.placeholderContext.isResolved?[4,this.initializeDynamicBuffer()]:[3,5];case 4:a.sent(),a.label=5;case 5:return[2];}})})},t.prototype.initializeStaticBuffer=function(e){return n(this,void 0,void 0,function(){var t,a,r,n,i;return o(this,function(o){switch(o.label){case 0:if(!this.descriptor)throw Error('GraphDescriptor is not loaded.');return t=this.descriptor,a=new l.default(t.memory_layout.static.size*Float32Array.BYTES_PER_ELEMENT),this.staticBuffer=a,r=s.default(t.weight_encoding),i=(n=a).write,[4,r.decode(new Uint8Array(e))];case 1:return[4,i.apply(n,[o.sent()])];case 2:return o.sent(),[4,this.getInputViews()];case 3:return o.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=a.bufferView.buffer}),[4,this.getOutputViews()];case 4:return o.sent().filter(function(e){return!e.isDynamic}).forEach(function(e){e.buffer=a.bufferView.buffer}),[2];}})})},t.prototype.initializeMetaBuffers=function(){return n(this,void 0,void 0,function(){var e=this,t;return o(this,function(a){switch(a.label){case 0:if(!this.descriptor)throw Error('GraphDescriptor is not loaded.');return t=this,[4,Promise.all(this.descriptor.exec_infos.map(function(t){return n(e,void 0,void 0,function(){var e;return o(this,function(a){switch(a.label){case 0:return e=new l.default(t.meta_buffer.length*Int32Array.BYTES_PER_ELEMENT),[4,e.write(new Uint8Array(t.meta_buffer))];case 1:return a.sent(),[2,e];}})})}))];case 1:return t.metaBuffers=a.sent(),[2];}})})},t.prototype.initializeDynamicBuffer=function(){return n(this,void 0,void 0,function(){var e,t,a,r;return o(this,function(n){switch(n.label){case 0:if(!this.descriptor)throw Error('GraphDescriptor is not loaded.');if(!this.placeholderContext)throw Error('PlaceholderContext is not initialized.');return e=this.descriptor,t=this.placeholderContext,a=t.resolve(e.memory_layout.dynamic.size),r=new l.default(a*Float32Array.BYTES_PER_ELEMENT),this.dynamicBuffer=r,[4,this.getInputViews()];case 1:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=r.bufferView.buffer}),[4,this.getOutputViews()];case 2:return n.sent().filter(function(e){return e.isDynamic}).forEach(function(e){e.buffer=r.bufferView.buffer}),[2];}})})},t.prototype.setPlaceholderValue=function(e){return n(this,void 0,void 0,function(){var t=this,a,r,l,i;return o(this,function(s){switch(s.label){case 0:if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized.');if(a=this.placeholderContext,a.update(e),!a.isResolved)return[2];if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.metaBuffers)throw new Error('MetaBuffers are not initialized');return r=this.descriptor,l=this.metaBuffers,[4,this.initializeDynamicBuffer()];case 1:return s.sent(),i=this,[4,Promise.all(r.exec_infos.map(function(e,r){return n(t,void 0,void 0,function(){var t,n,i,s;return o(this,function(){for(t=new Int32Array(l[r].bufferView.buffer),n=0,i=e.unresolved_value_list;n<i.length;n++)s=i[n],t[s.offset]=a.resolve(s.placeholder);return[2,a.resolve(e)]})})}))];case 2:return i.executionInfos=s.sent(),[2];}})})},t.prototype.getInputViews=function(){if(this.inputs)return this.inputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.inputs=e.inputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new p.default(null,r.offset*p.default.BYTES_PER_ELEMENT,r.size,t);return n}),this.inputs},t.prototype.getOutputViews=function(){if(this.outputs)return this.outputs;if(!this.descriptor)throw new Error('Descriptor is not loaded');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');var e=this.descriptor,t=this.placeholderContext;return this.outputs=e.outputs.map(function(a){var r=e.memory_layout.static.allocations[a]||e.memory_layout.dynamic.allocations[a],n=new p.default(null,r.offset*p.default.BYTES_PER_ELEMENT,r.size,t);return n}),this.outputs},t.prototype.run=function(){return n(this,void 0,void 0,function(){var e,t,a,r,n,l,i,s,d,u,p,l,i,h;return o(this,function(o){switch(o.label){case 0:if(!this.executionInfos)throw new Error('ExecutionInfos is not loaded');if(!this.staticBuffer)throw new Error('StaticBuffer is not initialized');if(!this.dynamicBuffer)throw new Error('DynamicBuffer is not initialized');if(!this.metaBuffers)throw new Error('MetaBuffer is not initialized');if(!this.placeholderContext)throw new Error('PlaceholderContext is not initialized');if(!this.placeholderContext.isResolved)throw new Error('Not all placeholders are resolved: '+this.placeholderContext);if(e=this.staticBuffer,t=this.dynamicBuffer,a=this.metaBuffers,!c.getConfiguration('DEBUG',!1))return[3,5];r=[],n=0,l=0,o.label=1;case 1:return l<this.executionInfos.length?(i=this.executionInfos[l],s=performance.now(),[4,this.webgpuHandler.executeSinglePipelineState('descriptor.'+i.entry_func_name,i.threadgroups_per_grid,i.threads_per_thread_group,[e,t,a[l]],!0)]):[3,4];case 2:o.sent(),d=performance.now()-s,r.push({Kernel:i.entry_func_name,"Elapsed time [ms]":d}),n+=d,o.label=3;case 3:return l++,[3,1];case 4:return u=Array.from(Object.values(r.reduce(function(e,t){return t.Kernel in e||(e[t.Kernel]={Kernel:t.Kernel,Count:0,"Elapsed time [ms]":0}),e[t.Kernel].Count++,e[t.Kernel]['Elapsed time [ms]']+=t['Elapsed time [ms]'],e},{}))),u.forEach(function(e){return e['Ratio [%]']=(e['Elapsed time [ms]']/n).toFixed(2)}),console.table(r),console.table(u),[3,6];case 5:for(p=null,l=0;l<this.executionInfos.length;l++)i=this.executionInfos[l],h=l==this.executionInfos.length-1,p=this.webgpuHandler.executeSinglePipelineState('descriptor.'+i.entry_func_name,i.threadgroups_per_grid,i.threads_per_thread_group,[e,t,a[l]],h);return[2,p];case 6:return[2];}})})},t)}(f.DescriptorRunner);t.default=g},function(e,t,a){'use strict';function r(e){for(var a in e)t.hasOwnProperty(a)||(t[a]=e[a])}Object.defineProperty(t,'__esModule',{value:!0}),r(a(18)),r(a(41)),r(a(20))},function(e,t,a){'use strict';function r(e){return e instanceof Array?Array.prototype.concat.apply([],e.map(function(e){return r(e)})):e}function n(e){if('number'==typeof e)return[e,e,e,e];if(4==e.length)return[e[0],e[1],e[2],e[3]];if(3==e.length)return[e[0],e[1],e[2],e[0]];if(1==e.length)return[e[0],e[0],e[0],e[0]];throw new Error('bias and scale must be scalar number or array of length 1 or 3 or 4.')}function o(e,t){void 0===t&&(t={});var a=t.type,o=void 0===a?Float32Array:a,i=t.color,l=void 0===i?p.Color.RGB:i,s=t.order,d=void 0===s?p.Order.HWC:s,u=t.bias,c=void 0===u?[0,0,0]:u,f=t.scale,_=void 0===f?[1,1,1]:f,m=n(c),y=n(_),v=e.width,x=e.height,E=e.data,k,C,T,I,S,R,B,D,P;switch(l){case p.Color.RGB:switch(k=new o(3*(v*x)),R=y[0],B=y[1],D=y[2],C=m[0],T=m[1],I=m[2],d){case p.Order.HWC:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[3*(A*v+h)+0]=(E[4*(A*v+h)+0]-C)/R,k[3*(A*v+h)+1]=(E[4*(A*v+h)+1]-T)/B,k[3*(A*v+h)+2]=(E[4*(A*v+h)+2]-I)/D;break;case p.Order.CHW:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[(0*x+A)*v+h]=(E[4*(A*v+h)+0]-C)/R,k[(1*x+A)*v+h]=(E[4*(A*v+h)+1]-T)/B,k[(2*x+A)*v+h]=(E[4*(A*v+h)+2]-I)/D;}break;case p.Color.BGR:switch(k=new o(3*(v*x)),C=m[0],T=m[1],I=m[2],R=y[0],B=y[1],D=y[2],d){case p.Order.HWC:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[3*(A*v+h)+0]=(E[4*(A*v+h)+2]-I)/D,k[3*(A*v+h)+1]=(E[4*(A*v+h)+1]-T)/B,k[3*(A*v+h)+2]=(E[4*(A*v+h)+0]-C)/R;break;case p.Order.CHW:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[(0*x+A)*v+h]=(E[4*(A*v+h)+2]-I)/D,k[(1*x+A)*v+h]=(E[4*(A*v+h)+1]-T)/B,k[(2*x+A)*v+h]=(E[4*(A*v+h)+0]-C)/R;}break;case p.Color.RGBA:switch(k=new o(4*(v*x)),R=y[0],B=y[1],D=y[2],P=y[3],C=m[0],T=m[1],I=m[2],S=m[3],d){case p.Order.HWC:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[4*(A*v+h)+0]=(E[4*(A*v+h)+0]-C)/R,k[4*(A*v+h)+1]=(E[4*(A*v+h)+1]-T)/B,k[4*(A*v+h)+2]=(E[4*(A*v+h)+2]-I)/D,k[4*(A*v+h)+3]=(E[4*(A*v+h)+3]-S)/P;break;case p.Order.CHW:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[(0*x+A)*v+h]=(E[4*(A*v+h)+0]-C)/R,k[(1*x+A)*v+h]=(E[4*(A*v+h)+1]-T)/B,k[(2*x+A)*v+h]=(E[4*(A*v+h)+2]-I)/D,k[(3*x+A)*v+h]=(E[4*(A*v+h)+3]-S)/P;}break;case p.Color.BGRA:switch(k=new o(4*(v*x)),C=m[0],T=m[1],I=m[2],S=m[3],R=y[0],B=y[1],D=y[2],P=y[3],d){case p.Order.HWC:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[4*(A*v+h)+0]=(E[4*(A*v+h)+2]-I)/D,k[4*(A*v+h)+1]=(E[4*(A*v+h)+1]-T)/B,k[4*(A*v+h)+2]=(E[4*(A*v+h)+0]-C)/R,k[4*(A*v+h)+3]=(E[4*(A*v+h)+3]-S)/P;break;case p.Order.CHW:for(var A=0;A<x;A++)for(var h=0;h<v;h++)k[(0*x+A)*v+h]=(E[4*(A*v+h)+2]-I)/D,k[(1*x+A)*v+h]=(E[4*(A*v+h)+1]-T)/B,k[(2*x+A)*v+h]=(E[4*(A*v+h)+0]-C)/R,k[(3*x+A)*v+h]=(E[4*(A*v+h)+3]-S)/P;}break;case p.Color.GREY:k=new o(v*x),R=y[0],B=y[1],D=y[2],C=m[0],T=m[1],I=m[2];for(var A=0;A<x;A++)for(var h=0;h<v;h++){var w=E[4*(A*v+h)+0],r=E[4*(A*v+h)+1],g=E[4*(A*v+h)+2];k[A*v+h]=0.2126*(w-C)/R+0.7162*(r-T)/B+0.0722*(g-I)/D}break;default:throw Error('Unknown color format: '+l);}return k}function i(e,t){void 0===t&&(t={});var a=t.type,r=void 0===a?Float32Array:a,n=t.color,i=void 0===n?p.Color.RGB:n,l=t.order,s=void 0===l?p.Order.HWC:l,d=t.srcX,u=void 0===d?0:d,h=t.srcY,f=void 0===h?0:h,_=t.srcW,g=void 0===_?e.width:_,b=t.srcH,m=void 0===b?e.height:b,y=t.dstX,v=void 0===y?0:y,w=t.dstY,x=void 0===w?0:w,E=t.bias,k=void 0===E?[0,0,0]:E,C=t.scale,T=void 0===C?[1,1,1]:C,I=t.dstW,S=void 0===I?g:I,R=t.dstH,B=void 0===R?m:R,D=c.getImageData(e,{srcX:u,srcY:f,srcW:g,srcH:m,dstX:v,dstY:x,dstW:S,dstH:B});return o(D,{type:r,color:i,order:s,bias:k,scale:T})}function l(e,t){void 0===t&&(t={});var a,r;if(e instanceof HTMLVideoElement)a=e.videoWidth,r=e.videoHeight;else if(e instanceof HTMLImageElement)a=e.naturalWidth,r=e.naturalHeight;else{if(e instanceof HTMLCanvasElement)return i(e,t);if(e instanceof ImageData)return o(e,t);throw TypeError('Failed to execute "getImageDataFromDrawable(drawable, options)": "drawable" must be an instanceof Drawable')}var n=t.type,l=void 0===n?Float32Array:n,s=t.color,d=void 0===s?p.Color.RGB:s,c=t.order,h=void 0===c?p.Order.HWC:c,f=t.srcX,_=void 0===f?0:f,g=t.srcY,b=void 0===g?0:g,m=t.dstX,y=void 0===m?0:m,v=t.dstY,w=void 0===v?0:v,x=t.dstW,E=void 0===x?a:x,k=t.dstH,C=void 0===k?r:k,T=t.bias,I=void 0===T?[0,0,0]:T,S=t.scale,R=void 0===S?[1,1,1]:S,B=document.createElement('canvas');B.width=y+E,B.height=w+C;var D=u.getContext2D(B);return D.drawImage(e,_,b,a,r,y,w,E,C),i(B,{type:l,color:d,order:h,bias:I,scale:R})}var s=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r['throw'](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(i,l)}s((r=r.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,a){function r(e){return function(t){return o([e,t])}}function o(r){if(i)throw new TypeError('Generator is already executing.');for(;n;)try{if(i=1,l&&(s=l[2&r[0]?'return':r[0]?'throw':'next'])&&!(s=s.call(l,r[1])).done)return s;switch((l=0,s)&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if((s=n.trys,!(s=0<s.length&&s[s.length-1]))&&(6===r[0]||2===r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue;}r=a.call(e,n)}catch(t){r=[6,t],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i,l,s,d;return d={next:r(0),throw:r(1),return:r(2)},'function'==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(t,'__esModule',{value:!0});var u=a(19),p=a(18),c=a(42),h=a(20);t.getImageArrayFromImageData=o,t.getImageArrayFromCanvas=i,t.getImageArrayFromDrawable=l,t.getImageArray=function(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,function(){var a,r;return d(this,function(n){switch(n.label){case 0:return'string'==typeof e?(a=l,[4,h.loadImageByUrl(e)]):[3,2];case 1:return[2,a.apply(void 0,[n.sent(),t])];case 2:return e instanceof HTMLInputElement?(r=l,[4,h.loadImageFromFileInput(e)]):[3,4];case 3:return[2,r.apply(void 0,[n.sent(),t])];case 4:if(e instanceof HTMLCanvasElement)return[2,i(e,t)];if(e instanceof HTMLImageElement||e instanceof HTMLVideoElement)return[2,l(e,t)];throw TypeError('Failed to execute "getImageData(image, options)": "image" must be an instance of string, HTMLInputElement, HTMLCanvasElement, HTMLImageElement, or HTMLVideoElement object');n.label=5;case 5:return[2];}})})},t.setImageArrayToCanvas=function(e,t,a,o,i){void 0===i&&(i={});var l=i.color,s=void 0===l?p.Color.RGB:l,d=i.order,u=void 0===d?p.Order.HWC:d,f=i.srcX,_=void 0===f?0:f,g=i.srcY,b=void 0===g?0:g,m=i.dstX,y=void 0===m?0:m,v=i.dstY,x=void 0===v?0:v,E=i.dstW,k=void 0===E?o.width:E,C=i.dstH,T=void 0===C?o.height:C,I=i.bias,S=void 0===I?[0,0,0]:I,R=i.scale,B=void 0===R?[1,1,1]:R,D=n(S),P=n(B),A=t,z=a;e=r(e);var O=new Uint8ClampedArray(4*(A*z)),N,L,F,M,U,W,j,G;switch(s){case p.Color.RGB:switch(N=D[0],L=D[1],F=D[2],U=P[0],W=P[1],j=P[2],u){case p.Order.HWC:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[3*(H*t+h)+0]*U+N,O[4*(H*t+h)+1]=e[3*(H*t+h)+1]*W+L,O[4*(H*t+h)+2]=e[3*(H*t+h)+2]*j+F,O[4*(H*t+h)+3]=255;break;case p.Order.CHW:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[(0*a+H)*t+h]*U+N,O[4*(H*t+h)+1]=e[(1*a+H)*t+h]*W+L,O[4*(H*t+h)+2]=e[(2*a+H)*t+h]*j+F,O[4*(H*t+h)+3]=255;}break;case p.Color.BGR:switch(N=D[0],L=D[1],F=D[2],U=P[0],W=P[1],j=P[2],u){case p.Order.HWC:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[3*(H*t+h)+2]*U+N,O[4*(H*t+h)+1]=e[3*(H*t+h)+1]*W+L,O[4*(H*t+h)+2]=e[3*(H*t+h)+0]*j+F,O[4*(H*t+h)+3]=255;break;case p.Order.CHW:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[(2*a+H)*t+h]*U+N,O[4*(H*t+h)+1]=e[(1*a+H)*t+h]*W+L,O[4*(H*t+h)+2]=e[(0*a+H)*t+h]*j+F,O[4*(H*t+h)+3]=255;}break;case p.Color.RGBA:switch(N=D[0],L=D[1],F=D[2],M=D[3],U=P[0],W=P[1],j=P[2],G=P[3],u){case p.Order.HWC:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[3*(H*t+h)+0]*U+N,O[4*(H*t+h)+1]=e[3*(H*t+h)+1]*W+L,O[4*(H*t+h)+2]=e[3*(H*t+h)+2]*j+F,O[4*(H*t+h)+3]=e[3*(H*t+h)+3]*G+M;break;case p.Order.CHW:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[(0*a+H)*t+h]*U+N,O[4*(H*t+h)+1]=e[(1*a+H)*t+h]*W+L,O[4*(H*t+h)+2]=e[(2*a+H)*t+h]*j+F,O[4*(H*t+h)+3]=e[(3*a+H)*t+h]*G+M;}break;case p.Color.BGRA:switch(N=D[0],L=D[1],F=D[2],M=D[3],U=P[0],W=P[1],j=P[2],G=P[3],u){case p.Order.HWC:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[4*(H*t+h)+2]*U+N,O[4*(H*t+h)+1]=e[4*(H*t+h)+1]*W+L,O[4*(H*t+h)+2]=e[4*(H*t+h)+0]*j+F,O[4*(H*t+h)+3]=e[4*(H*t+h)+3]*G+M;break;case p.Order.CHW:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=e[(2*a+H)*t+h]*U+N,O[4*(H*t+h)+1]=e[(1*a+H)*t+h]*W+L,O[4*(H*t+h)+2]=e[(0*a+H)*t+h]*j+F,O[4*(H*t+h)+3]=e[(3*a+H)*t+h]*G+M;}break;case p.Color.GREY:for(var H=b;H<b+z;H++)for(var h=_;h<_+A;h++)O[4*(H*t+h)+0]=O[4*(H*t+h)+1]=O[4*(H*t+h)+2]=e[H*t+h]*B[0]+S[0],O[4*(H*t+h)+3]=255;}c.setImageDataToCanvas(new ImageData(O,A,z),o,{srcX:_,srcY:b,srcW:A,srcH:z,dstX:y,dstY:x,dstW:k,dstH:T})}},function(e,t,a){'use strict';function r(e,t){void 0===t&&(t={});var a=t.srcX,r=void 0===a?0:a,n=t.srcY,l=void 0===n?0:n,s=t.srcW,d=void 0===s?e.width:s,u=t.srcH,p=void 0===u?e.height:u,c=t.dstX,h=void 0===c?0:c,f=t.dstY,_=void 0===f?0:f,g=t.dstW,b=void 0===g?d:g,m=t.dstH,y=void 0===m?p:m,v=i.getContext2D(e).getImageData(r,l,d,p);return(0!==h||0!==_||d!==b||p!==y)&&(v=o(v,{dstX:h,dstY:_,dstW:b,dstH:y})),v}function n(e,t){void 0===t&&(t={});var a,r;if(e instanceof HTMLVideoElement)a=e.videoWidth,r=e.videoHeight;else if(e instanceof HTMLImageElement)a=e.naturalWidth,r=e.naturalHeight;else throw TypeError('Failed to execute "getImageDataFromDrawable(drawable, options)": "drawable" must be an instanceof HTMLVideoElement or HTMLImageElement');var n=t.srcX,o=void 0===n?0:n,l=t.srcY,s=void 0===l?0:l,d=t.dstX,u=void 0===d?0:d,p=t.dstY,c=void 0===p?0:p,h=t.dstW,f=void 0===h?a:h,_=t.dstH,g=void 0===_?r:_,b=document.createElement('canvas');b.width=u+f,b.height=c+g;var m=i.getContext2D(b);return m.drawImage(e,o,s,a,r,u,c,f,g),m.getImageData(0,0,u+f,c+g)}function o(e,t){void 0===t&&(t={});var a=t.srcX,r=void 0===a?0:a,n=t.srcY,o=void 0===n?0:n,l=t.srcW,s=void 0===l?e.width:l,d=t.srcH,u=void 0===d?e.height:d,p=t.dstX,c=void 0===p?0:p,h=t.dstY,f=void 0===h?0:h,_=t.dstW,g=void 0===_?s:_,b=t.dstH,m=void 0===b?u:b,y=document.createElement('canvas');y.width=s,y.height=u;var v=i.getContext2D(y);v.putImageData(e,-r,-o);var w=document.createElement('canvas');w.width=c+g,w.height=f+m;var x=i.getContext2D(w);return x.drawImage(y,0,0,s,u,c,f,g,m),x.getImageData(0,0,c+g,f+m)}Object.defineProperty(t,'__esModule',{value:!0});var i=a(19);t.getImageDataFromCanvas=r,t.getImageDataFromDrawable=n,t.getImageData=function(e,t){if(void 0===t&&(t={}),e instanceof HTMLCanvasElement)return r(e,t);if(e instanceof HTMLVideoElement||e instanceof HTMLImageElement)return n(e,t);throw TypeError('Failed to execute "getImageData(image, options)": "image" must be an instance of HTMLCanvasElement, HTMLVideoElement, or HTMLImageElement')},t.setImageDataToCanvas=function(e,t,a){void 0===a&&(a={});var r=a.srcX,n=void 0===r?0:r,l=a.srcY,s=void 0===l?0:l,d=a.srcW,u=void 0===d?e.width:d,p=a.srcH,c=void 0===p?e.height:p,h=a.dstX,f=void 0===h?0:h,_=a.dstY,g=void 0===_?0:_,b=a.dstW,m=void 0===b?u:b,y=a.dstH,v=void 0===y?c:y;(0!==n||0!==s||u!==m||c!==v)&&(e=o(e,{srcX:n,srcY:s,srcW:u,srcH:c,dstW:m,dstH:v})),i.getContext2D(t).putImageData(e,f,g)}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),function(e){for(var a in e)t.hasOwnProperty(a)||(t[a]=e[a])}(a(44))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.argmax=function(e,t){void 0===t&&(t=1),e=e.slice();for(var a=[[0,e.length]],r=[],n=0;n<e.length;n++)r[n]=n;for(;0<a.length;){var o=a.pop(),i=o[0],l=o[1],s=e[l-1],d=i,u=l-2,p=void 0;if(!(i>=l-1)){for(;;){for(;e[d]>s&&d<=u;)d++;for(;e[u]<=s&&d<=u;)u--;if(d>=u)break;p=e[d],e[d]=e[u],e[u]=p,p=r[d],r[d]=r[u],r[u]=p}e[l-1]=e[d],e[d]=s,p=r[l-1],r[l-1]=r[d],r[d]=p,a.push([i,d]),d+1<t&&a.push([d+1,l])}}for(var c=[],n=0;n<t;n++)c.push(r[n]);return c},t.argmin=function(e,t){void 0===t&&(t=1),e=e.slice();for(var a=[[0,e.length]],r=[],n=0;n<e.length;n++)r[n]=n;for(;0<a.length;){var o=a.pop(),i=o[0],l=o[1],s=e[l-1],d=i,u=l-2,p=void 0;if(!(i>=l-1)){for(;;){for(;e[d]<s&&d<=u;)d++;for(;e[u]>=s&&d<=u;)u--;if(d>=u)break;p=e[d],e[d]=e[u],e[u]=p,p=r[d],r[d]=r[u],r[u]=p}e[l-1]=e[d],e[d]=s,p=r[l-1],r[l-1]=r[d],r[d]=p,a.push([i,d]),d+1<t&&a.push([d+1,l])}}for(var c=[],n=0;n<t;n++)c.push(r[n]);return c}}])});
//# sourceMappingURL=webdnn.es5.js.map